# é¡¹ç›®ä¼˜åŒ–å®Œæˆæ¸…å•

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. ğŸ”§ æ–°å¢å·¥å…·æ–‡ä»¶

#### 1.1 æ—¥å¿—å·¥å…· (`utils/logger.js`)
**åŠŸèƒ½**:
- ç»Ÿä¸€çš„æ—¥å¿—ç®¡ç†
- å¼€å‘/ç”Ÿäº§ç¯å¢ƒåŒºåˆ†
- æ”¯æŒå¤šç§æ—¥å¿—çº§åˆ«ï¼ˆdebug, info, warn, errorï¼‰
- æ”¯æŒAPIè¯·æ±‚/å“åº”æ—¥å¿—
- æ”¯æŒç”¨æˆ·è¡Œä¸ºè¿½è¸ª

**ä½¿ç”¨**:
```javascript
import { logger, createLogger } from '@/utils/logger'

logger.debug('è°ƒè¯•ä¿¡æ¯')
logger.info('æ™®é€šä¿¡æ¯')
logger.warn('è­¦å‘Šä¿¡æ¯')
logger.error('é”™è¯¯ä¿¡æ¯', error)

const apiLogger = createLogger('API')
apiLogger.request('GET', '/api/users')
```

#### 1.2 é”™è¯¯å¤„ç†å·¥å…· (`utils/error-handler.js`)
**åŠŸèƒ½**:
- ç»Ÿä¸€é”™è¯¯å¤„ç†é€»è¾‘
- HTTPçŠ¶æ€ç é”™è¯¯æ˜ å°„
- è‡ªåŠ¨æ˜¾ç¤ºé”™è¯¯æç¤º
- è‡ªåŠ¨å¤„ç†ç™»å½•è¿‡æœŸ
- å…¨å±€é”™è¯¯æ•è·æ”¯æŒ

**ä½¿ç”¨**:
```javascript
import { handleError, handleApiError, wrapAsync } from '@/utils/error-handler'

// æ–¹å¼1ï¼šæ‰‹åŠ¨å¤„ç†
try {
  await api.call()
} catch (error) {
  handleApiError(error, 'APIè°ƒç”¨')
}

// æ–¹å¼2ï¼šåŒ…è£…å‡½æ•°
const safeCall = wrapAsync(api.call, 'APIè°ƒç”¨')
await safeCall()
```

#### 1.3 æœç´¢API (`api/search.js`)
**åŠŸèƒ½**:
- å…¨å±€æœç´¢æ¥å£
- åˆ†ç±»æœç´¢ï¼ˆèµ„è®¯/è¯¾ç¨‹/æ´»åŠ¨ï¼‰
- æœç´¢çƒ­è¯
- æœç´¢å»ºè®®

**ä½¿ç”¨**:
```javascript
import { globalSearch, searchNews, getHotKeywords } from '@/api/search'

// å…¨å±€æœç´¢
const results = await globalSearch({
  keyword: 'åŒ—å¤§',
  type: 'all',
  page: 1
})

// æœç´¢èµ„è®¯
const news = await searchNews('åŒ—å¤§', 1, 10)
```

### 2. ğŸ“¦ æ–°å¢ç»„ä»¶

#### 2.1 æ´»åŠ¨å¡ç‰‡ç»„ä»¶ (`components/activity-card`)
**åŠŸèƒ½**:
- å±•ç¤ºæ´»åŠ¨ä¿¡æ¯
- å›¾ç‰‡æ‡’åŠ è½½
- å›¾ç‰‡é”™è¯¯å¤„ç†
- ç‚¹å‡»äº‹ä»¶æ”¯æŒ
- å®Œæ•´çš„ç»„ä»¶æ–‡æ¡£

**ä½¿ç”¨**:
```vue
<activity-card 
  :activity="item"
  @click="goDetail"
/>
```

### 3. ğŸ“š æ–°å¢æ–‡æ¡£

#### 3.1 é¡¹ç›®ç»“æ„åˆ†æä¸ä¼˜åŒ–å»ºè®®
- å…¨é¢çš„é¡¹ç›®å¥åº·åº¦æ£€æŸ¥
- 77ä¸ªé—®é¢˜ç‚¹æ’æŸ¥
- æŒ‰ä¼˜å…ˆçº§åˆ†ç±»çš„æ”¹è¿›å»ºè®®
- è¯¦ç»†çš„ä¿®å¤æ­¥éª¤æŒ‡å¯¼

#### 3.2 ç»„ä»¶ä½¿ç”¨æ–‡æ¡£
- activity-card ç»„ä»¶å®Œæ•´æ–‡æ¡£
- åŒ…å«ä½¿ç”¨ç¤ºä¾‹ã€APIè¯´æ˜ã€æ³¨æ„äº‹é¡¹

---

## ğŸš§ å¾…å®Œæˆçš„ä¼˜åŒ–

### ç¬¬ä¸€ä¼˜å…ˆçº§ ğŸ”´ï¼ˆå¿…é¡»å®Œæˆï¼‰

#### 1. å›¾ç‰‡èµ„æºè¡¥å……
**ç¼ºå¤±æ–‡ä»¶**:
```
/static/images/
â”œâ”€â”€ logo-large.png      âŒ ç™»å½•é¡µLOGO
â”œâ”€â”€ wechat-icon.png     âŒ å¾®ä¿¡å›¾æ ‡
â”œâ”€â”€ phone.png           âŒ æ‰‹æœºå›¾æ ‡
â”œâ”€â”€ empty.png           âŒ ç©ºçŠ¶æ€å›¾
â”œâ”€â”€ preview.png         âŒ é¢„è§ˆå›¾æ ‡
â”œâ”€â”€ download-icon.png   âŒ ä¸‹è½½å›¾æ ‡
â””â”€â”€ default-avatar.png  âŒ é»˜è®¤å¤´åƒ
```

**ä¸´æ—¶æ–¹æ¡ˆ**:
- ä½¿ç”¨ Icon ç»„ä»¶æ›¿ä»£
- ä½¿ç”¨å ä½å›¾æœåŠ¡
- ä½¿ç”¨ Emoji è¡¨æƒ…

#### 2. æœç´¢åŠŸèƒ½å®ç°
**ä»»åŠ¡**:
- [ ] åç«¯å®ç°æœç´¢API (`GET /api/search`)
- [ ] æ›´æ–° `pages/search/index.vue` ä½¿ç”¨çœŸå®API
- [ ] ç§»é™¤æ¨¡æ‹Ÿæ•°æ®ä»£ç 

**åç«¯æ¥å£è§„èŒƒ**:
```
GET /api/search
Query: keyword, type (news/course/activity/all), page, pageSize
Response: { news: [], courses: [], activities: [] }
```

#### 3. ä¸‹è½½è®°å½•åŠŸèƒ½å®ç°
**ä»»åŠ¡**:
- [ ] å®ç°æœ¬åœ°ä¸‹è½½è®°å½•æŒä¹…åŒ–
- [ ] æ›´æ–° `pages/mine/download-list.vue`
- [ ] æ·»åŠ ä¸‹è½½å†å²ç®¡ç†åŠŸèƒ½

**å»ºè®®å®ç°**:
```javascript
// utils/download-manager.js
export function saveDownloadRecord(file) {
  const history = getStorage('downloadHistory', [])
  history.unshift({
    id: file.id,
    courseName: file.courseName,
    fileSize: file.fileSize,
    downloadTime: new Date().toISOString(),
    localPath: file.localPath
  })
  setStorage('downloadHistory', history.slice(0, 50)) // æœ€å¤šä¿å­˜50æ¡
}
```

#### 4. ç”Ÿäº§ç¯å¢ƒæ—¥å¿—æ¸…ç†
**ä»»åŠ¡**:
- [ ] æ›¿æ¢æ‰€æœ‰ `console.log` ä¸º `logger.debug`
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨ç§»é™¤æ—¥å¿—
- [ ] ç§»é™¤æ•æ„Ÿä¿¡æ¯æ—¥å¿—

**å…³é”®æ–‡ä»¶** (28ä¸ªæ–‡ä»¶åŒ…å«console):
```
- api/request.js
- store/*.js
- pages/**/*.vue
- utils/*.js
```

**æ‰¹é‡æ›¿æ¢å»ºè®®**:
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
find . -name "*.js" -o -name "*.vue" | xargs sed -i 's/console\.log/logger.debug/g'
```

### ç¬¬äºŒä¼˜å…ˆçº§ ğŸŸ¡ï¼ˆå»ºè®®å®Œæˆï¼‰

#### 1. åº”ç”¨æ–°å·¥å…·åˆ°ç°æœ‰ä»£ç 
**ä»»åŠ¡**:
- [ ] `api/request.js` ä½¿ç”¨ logger æ›¿ä»£ console
- [ ] `api/request.js` ä½¿ç”¨ error-handler å¤„ç†é”™è¯¯
- [ ] æ‰€æœ‰é¡µé¢ä½¿ç”¨ handleApiError å¤„ç†APIé”™è¯¯

**ç¤ºä¾‹æ”¹é€ ** (request.js):
```javascript
// ä¹‹å‰
console.log('ğŸ“¥ [Request] å‘èµ·è¯·æ±‚:', method, url)

// ä¹‹å
import { logger } from '@/utils/logger'
logger.request(method, url, data)
```

#### 2. ä½¿ç”¨ activity-card ç»„ä»¶
**ä»»åŠ¡**:
- [ ] æ›¿æ¢ `pages/index/index.vue` æ´»åŠ¨åˆ—è¡¨
- [ ] æ›¿æ¢ `pages/association/index.vue` æ´»åŠ¨åˆ—è¡¨
- [ ] æ›¿æ¢ `pages/search/index.vue` æ´»åŠ¨æœç´¢ç»“æœ

#### 3. å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–
**ä»»åŠ¡**:
- [ ] ä¸ºæ‰€æœ‰é•¿åˆ—è¡¨çš„å›¾ç‰‡æ·»åŠ  `lazy-load` å±æ€§
- [ ] æ·»åŠ å›¾ç‰‡åŠ è½½å¤±è´¥çš„å ä½å›¾å¤„ç†
- [ ] ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶å°è£…ï¼ˆå¯é€‰ï¼‰

**å…³é”®é¡µé¢**:
- pages/index/index.vue
- pages/news/index.vue
- pages/course/index.vue
- pages/association/index.vue

#### 4. Token åŠ å¯†å­˜å‚¨
**ä»»åŠ¡**:
- [ ] å®‰è£… crypto-js: `npm install crypto-js`
- [ ] åˆ›å»º `utils/crypto.js`
- [ ] æ›´æ–° `store/user.js` ä½¿ç”¨åŠ å¯†å­˜å‚¨

### ç¬¬ä¸‰ä¼˜å…ˆçº§ ğŸŸ¢ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰

#### 1. Icon ç»„ä»¶æ‰©å±•
**ä»»åŠ¡**:
- [ ] æ·»åŠ æ›´å¤šå¸¸ç”¨å›¾æ ‡
- [ ] æ”¯æŒ iconfont
- [ ] æ”¯æŒè‡ªå®šä¹‰é¢œè‰²å’Œå¤§å°

#### 2. é¡µé¢é¢„åŠ è½½é…ç½®
**ä»»åŠ¡**:
- [ ] åœ¨ `pages.json` é…ç½® `preloadRule`
- [ ] æµ‹è¯•é¢„åŠ è½½æ•ˆæœ

#### 3. ç»„ä»¶æ–‡æ¡£å®Œå–„
**ä»»åŠ¡**:
- [ ] course-card ç»„ä»¶æ–‡æ¡£
- [ ] news-card ç»„ä»¶æ–‡æ¡£
- [ ] empty-view ç»„ä»¶æ–‡æ¡£
- [ ] custom-navbar ç»„ä»¶æ–‡æ¡£

#### 4. é”™è¯¯ç›‘æ§é›†æˆ
**ä»»åŠ¡**:
- [ ] é€‰æ‹©é”™è¯¯ç›‘æ§æœåŠ¡ï¼ˆSentry/å¾®ä¿¡äº‘ç›‘æ§ï¼‰
- [ ] é›†æˆSDK
- [ ] é…ç½®é”™è¯¯ä¸ŠæŠ¥

---

## ğŸ“‹ å¿«é€Ÿæ“ä½œæŒ‡å—

### ç«‹å³å¯æ‰§è¡Œçš„ä¼˜åŒ–

#### 1. åœ¨ App.vue ä¸­å¯ç”¨å…¨å±€é”™è¯¯å¤„ç†
```vue
<script setup>
import { onErrorCaptured } from 'vue'
import { setupGlobalErrorHandler } from '@/utils/error-handler'
import { logger } from '@/utils/logger'

// å¯ç”¨å…¨å±€é”™è¯¯æ•è·
setupGlobalErrorHandler()

// Vueé”™è¯¯æ•è·
onErrorCaptured((err, instance, info) => {
  logger.error('Vue Error:', err, info)
  return false
})
</script>
```

#### 2. åœ¨ request.js ä¸­é›†æˆæ–°å·¥å…·
```javascript
import { logger } from '@/utils/logger'
import { handleApiError } from '@/utils/error-handler'

// è¯·æ±‚å‰
logger.request(method, url, data)

// è¯·æ±‚æˆåŠŸ
logger.response(url, res.statusCode, data)

// è¯·æ±‚å¤±è´¥
handleApiError(error, `${method} ${url}`, false) // falseè¡¨ç¤ºä¸è‡ªåŠ¨toast
```

#### 3. æ·»åŠ å›¾ç‰‡é”™è¯¯å¤„ç†
```vue
<!-- åœ¨æ‰€æœ‰ image æ ‡ç­¾æ·»åŠ  -->
<image 
  :src="item.image || '/static/images/placeholder.png'" 
  lazy-load
  @error="handleImageError"
/>

<script setup>
const handleImageError = (e) => {
  // ä½¿ç”¨å ä½å›¾
  e.target.src = '/static/images/placeholder.png'
}
</script>
```

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœé¢„æœŸ

### ä»£ç è´¨é‡æå‡
- âœ… ç»Ÿä¸€çš„æ—¥å¿—ç®¡ç†
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- âœ… å‡å°‘ä»£ç é‡å¤
- â³ æ›´å¥½çš„å¯ç»´æŠ¤æ€§

### æ€§èƒ½ä¼˜åŒ–
- â³ å›¾ç‰‡æ‡’åŠ è½½ï¼ˆå‡å°‘é¦–å±åŠ è½½ï¼‰
- â³ é¡µé¢é¢„åŠ è½½ï¼ˆæå‡åˆ‡æ¢é€Ÿåº¦ï¼‰
- â³ ç”Ÿäº§ç¯å¢ƒé›¶æ—¥å¿—ï¼ˆå‡å°‘æ€§èƒ½æŸè€—ï¼‰

### ç”¨æˆ·ä½“éªŒæ”¹å–„
- âœ… ç»Ÿä¸€çš„é”™è¯¯æç¤º
- â³ æ›´å¿«çš„é¡µé¢å“åº”
- â³ æ›´æµç•…çš„å›¾ç‰‡åŠ è½½
- â³ æœç´¢åŠŸèƒ½å¯ç”¨

### å¼€å‘ä½“éªŒæå‡
- âœ… å®Œå–„çš„ç»„ä»¶æ–‡æ¡£
- âœ… ç»Ÿä¸€çš„å·¥å…·å‡½æ•°
- âœ… æ¸…æ™°çš„é¡¹ç›®ç»“æ„
- âœ… è¯¦ç»†çš„ä¼˜åŒ–æŒ‡å—

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### æœ¬å‘¨ä»»åŠ¡ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
1. **å‘¨ä¸€**: è¡¥å……æ‰€æœ‰ç¼ºå¤±å›¾ç‰‡èµ„æº
2. **å‘¨äºŒ**: åç«¯å®ç°æœç´¢APIï¼Œå‰ç«¯é›†æˆ
3. **å‘¨ä¸‰**: å®ç°ä¸‹è½½è®°å½•åŠŸèƒ½
4. **å‘¨å››**: åº”ç”¨æ–°å·¥å…·åˆ°ç°æœ‰ä»£ç 
5. **å‘¨äº”**: æ¸…ç†ç”Ÿäº§ç¯å¢ƒæ—¥å¿—ï¼Œæµ‹è¯•

### æœ¬æœˆç›®æ ‡
- å®Œæˆæ‰€æœ‰ğŸ”´é«˜ä¼˜å…ˆçº§ä»»åŠ¡
- å®Œæˆ70%çš„ğŸŸ¡ä¸­ä¼˜å…ˆçº§ä»»åŠ¡
- è¿›è¡Œä¸€æ¬¡å®Œæ•´çš„ä»£ç å®¡æŸ¥
- å‘å¸ƒä¼˜åŒ–ç‰ˆæœ¬

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
1. `é¡¹ç›®ç»“æ„åˆ†æä¸ä¼˜åŒ–å»ºè®®.md` - è¯¦ç»†åˆ†æ
2. `components/*/README.md` - ç»„ä»¶ä½¿ç”¨æ–‡æ¡£
3. `utils/*` - å·¥å…·å‡½æ•°æºç æ³¨é‡Š
4. é¡¹ç›®å¼€å‘æŒ‡å—.md

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-10-31  
**æœ€åæ›´æ–°**: 2025-10-31  
**å½“å‰ç‰ˆæœ¬**: v1.0.0


