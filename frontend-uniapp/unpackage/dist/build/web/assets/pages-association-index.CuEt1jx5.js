import{r as a,G as e,N as s,O as l,P as t,o as i,H as c,x as o,I as n,b as u,s as d,c as r,w as m,i as f,d as _,e as v,h as g,j as y,F as p,n as k,f as b,A as h,k as w,t as x,l as z,z as C,y as j}from"./index-Cljxm-NV.js";import{g as F,a as I}from"./association.BZuSzsP7.js";import{a as $}from"./util.DiFpgDCN.js";import{E as A}from"./empty-view.C6sbClhI.js";import{I as D}from"./icon.DkV2kXZZ.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";/* empty css                                                                   */const G=T({__name:"index",setup(T){const G=a("alumni"),M=a([{label:"同学会",value:"alumni",icon:"user",badge:""},{label:"俱乐部",value:"club",icon:"association",badge:""},{label:"活动",value:"activity",icon:"star",badge:""}]),O=a([]),E=a([]),H=a([]);e((a=>{a.tab&&(G.value=a.tab)})),s((()=>{const a=l("association_tab");a&&(G.value=a,t("association_tab")),L()})),i((()=>{L()}));const L=async()=>{c({title:"加载中..."});try{if("activity"===G.value){const a=await F({page:1,pageSize:20});H.value=a.items||a.data||a.list||[]}else{const a=await I(G.value),e=Array.isArray(a)?a:a.items||a.data||a.list||[];"alumni"===G.value?O.value=e:E.value=e}}catch(a){console.error("加载数据失败：",a),o({title:"加载失败",icon:"none"})}finally{n()}},N=a=>$(a),P=a=>{z({url:`/pages/association/detail?id=${a.id}&type=${G.value}`})};return u((()=>{L().then((()=>{d()}))})),(a,e)=>{const s=f,l=C,t=j;return _(),r(s,{class:"page"},{default:m((()=>[v(s,{class:"category-tabs"},{default:m((()=>[v(s,{class:"tabs-container"},{default:m((()=>[(_(!0),g(p,null,y(M.value,((a,e)=>(_(),r(s,{key:e,class:h(["tab-item",{active:G.value===a.value}]),onClick:e=>{return s=a.value,G.value=s,void L();var s}},{default:m((()=>[v(s,{class:"tab-icon"},{default:m((()=>[v(D,{name:a.icon,size:40,color:G.value===a.value?"#C8161D":"#999"},null,8,["name","color"])])),_:2},1024),v(l,{class:"tab-label"},{default:m((()=>[w(x(a.label),1)])),_:2},1024),a.badge?(_(),r(s,{key:0,class:"tab-badge"},{default:m((()=>[w(x(a.badge),1)])),_:2},1024)):b("",!0)])),_:2},1032,["class","onClick"])))),128)),v(s,{class:"tab-indicator",style:k({transform:`translateX(${228*M.value.findIndex((a=>a.value===G.value))}rpx)`})},null,8,["style"])])),_:1})])),_:1}),"alumni"===G.value?(_(),r(s,{key:0,class:"association-list"},{default:m((()=>[(_(!0),g(p,null,y(O.value,((a,e)=>(_(),r(s,{key:a.id,class:"association-card",style:k({"animation-delay":.1*e+"s"}),onClick:e=>P(a)},{default:m((()=>[v(s,{class:"card-header"},{default:m((()=>[v(s,{class:"logo-wrapper"},{default:m((()=>[v(t,{src:a.logo,class:"association-logo",mode:"aspectFill"},null,8,["src"]),v(s,{class:"logo-decoration"})])),_:2},1024),v(s,{class:"association-info"},{default:m((()=>[v(s,{class:"association-name"},{default:m((()=>[w(x(a.name),1)])),_:2},1024),a.description?(_(),r(s,{key:0,class:"association-desc"},{default:m((()=>[w(x(a.description),1)])),_:2},1024)):b("",!0),v(s,{class:"association-meta"},{default:m((()=>[v(s,{class:"meta-item"},{default:m((()=>[v(D,{name:"time",size:28,color:"#999"}),v(l,{class:"meta-text"},{default:m((()=>[w(x(N(a.updateTime)),1)])),_:2},1024)])),_:2},1024),v(s,{class:"meta-item"},{default:m((()=>[v(D,{name:"view",size:28,color:"#999"}),v(l,{class:"meta-text"},{default:m((()=>[w(x(a.views||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),v(s,{class:"card-footer"},{default:m((()=>[a.tags&&a.tags.length>0?(_(),r(s,{key:0,class:"tag-list"},{default:m((()=>[(_(!0),g(p,null,y(a.tags.slice(0,3),((a,e)=>(_(),r(s,{class:"tag",key:e},{default:m((()=>[w(x(a),1)])),_:2},1024)))),128))])),_:2},1024)):b("",!0),v(D,{name:"arrow-right",size:32,color:"#C8161D",class:"arrow-icon"})])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1})):b("",!0),"club"===G.value?(_(),r(s,{key:1,class:"association-list"},{default:m((()=>[(_(!0),g(p,null,y(E.value,((a,e)=>(_(),r(s,{key:a.id,class:"association-card",style:k({"animation-delay":.1*e+"s"}),onClick:e=>P(a)},{default:m((()=>[v(s,{class:"card-header"},{default:m((()=>[v(s,{class:"logo-wrapper"},{default:m((()=>[v(t,{src:a.logo,class:"association-logo",mode:"aspectFill"},null,8,["src"]),v(s,{class:"logo-decoration"})])),_:2},1024),v(s,{class:"association-info"},{default:m((()=>[v(s,{class:"association-name"},{default:m((()=>[w(x(a.name),1)])),_:2},1024),a.description?(_(),r(s,{key:0,class:"association-desc"},{default:m((()=>[w(x(a.description),1)])),_:2},1024)):b("",!0),v(s,{class:"association-meta"},{default:m((()=>[v(s,{class:"meta-item"},{default:m((()=>[v(D,{name:"time",size:28,color:"#999"}),v(l,{class:"meta-text"},{default:m((()=>[w(x(N(a.updateTime)),1)])),_:2},1024)])),_:2},1024),v(s,{class:"meta-item"},{default:m((()=>[v(D,{name:"view",size:28,color:"#999"}),v(l,{class:"meta-text"},{default:m((()=>[w(x(a.views||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),v(s,{class:"card-footer"},{default:m((()=>[a.tags&&a.tags.length>0?(_(),r(s,{key:0,class:"tag-list"},{default:m((()=>[(_(!0),g(p,null,y(a.tags.slice(0,3),((a,e)=>(_(),r(s,{class:"tag",key:e},{default:m((()=>[w(x(a),1)])),_:2},1024)))),128))])),_:2},1024)):b("",!0),v(D,{name:"arrow-right",size:32,color:"#C8161D",class:"arrow-icon"})])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1})):b("",!0),"activity"===G.value?(_(),r(s,{key:2,class:"activity-list"},{default:m((()=>[(_(!0),g(p,null,y(H.value,((a,e)=>(_(),r(s,{key:a.id,class:"activity-card-enhanced",style:k({"animation-delay":.1*e+"s"}),onClick:e=>(a=>{z({url:`/pages/association/activity-detail?id=${a.id}`})})(a)},{default:m((()=>[v(s,{class:"activity-images-wrapper"},{default:m((()=>[a.images&&a.images.length>0?(_(),r(s,{key:0,class:h(["activity-images",`images-count-${Math.min(a.images.length,4)}`])},{default:m((()=>[(_(!0),g(p,null,y(a.images.slice(0,4),((e,i)=>(_(),r(s,{key:i,class:"image-item"},{default:m((()=>[v(t,{src:e,class:"activity-image",mode:"aspectFill"},null,8,["src"]),3===i&&a.images.length>4?(_(),r(s,{key:0,class:"image-more"},{default:m((()=>[v(l,null,{default:m((()=>[w("+"+x(a.images.length-4),1)])),_:2},1024)])),_:2},1024)):b("",!0)])),_:2},1024)))),128))])),_:2},1032,["class"])):(_(),r(s,{key:1,class:"activity-cover"},{default:m((()=>[v(t,{src:a.coverImage,class:"cover-image",mode:"aspectFill"},null,8,["src"])])),_:2},1024))])),_:2},1024),v(s,{class:"activity-info"},{default:m((()=>[v(s,{class:"activity-title"},{default:m((()=>[w(x(a.title),1)])),_:2},1024),v(s,{class:"activity-meta"},{default:m((()=>[v(s,{class:"meta-left"},{default:m((()=>[v(s,{class:"meta-item"},{default:m((()=>[v(D,{name:"time",size:28,color:"#999"}),v(l,{class:"meta-text"},{default:m((()=>[w(x(N(a.publishTime)),1)])),_:2},1024)])),_:2},1024),v(s,{class:"meta-item"},{default:m((()=>[v(D,{name:"view",size:28,color:"#999"}),v(l,{class:"meta-text"},{default:m((()=>[w(x(a.views||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),v(s,{class:"like-badge"},{default:m((()=>[v(D,{name:"like",size:28,color:"#ff6b6b"}),v(l,{class:"like-count"},{default:m((()=>[w(x(a.likes||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1})):b("",!0),0===("alumni"===G.value?O.value:"club"===G.value?E.value:"activity"===G.value?H.value:[]).length?(_(),r(A,{key:3,text:"暂无内容","show-btn":!0,onClick:L})):b("",!0)])),_:1})}}},[["__scopeId","data-v-487c756c"]]);export{G as default};
