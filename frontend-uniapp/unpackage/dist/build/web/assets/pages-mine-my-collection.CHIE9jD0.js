import{r as e,o as a,m as l,s,b as t,A as u,c as o,w as n,i,d as r,e as v,h as c,j as p,F as _,f as d,k as m,q as f,l as y}from"./index-BA-OeFd4.js";import{b as g}from"./news.DNtdDH2m.js";import{N as w}from"./news-card.CHXG1YTM.js";import{E as j}from"./empty-view.BTAzOfaH.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./util.SBHl27LX.js";/* empty css                                                                   */const k=h({__name:"my-collection",setup(h){const k=e([]),x=e(!1),b=e(1),F=e(10),q=e(!0);a((()=>{z(!0)}));const z=async(e=!1)=>{if(!x.value){x.value=!0,e&&(b.value=1,q.value=!0);try{const a=await g({page:b.value,pageSize:F.value}),l=a.items||a.data||a.list||[];k.value=e?l:[...k.value,...l],l.length<F.value&&(q.value=!1),b.value++}catch(a){console.error("加载收藏列表失败：",a),l({title:"加载失败",icon:"none"})}finally{x.value=!1,e&&s()}}},A=e=>{y({url:`/pages/news/detail?id=${e.id}`})};return t((()=>{z(!0)})),u((()=>{q.value&&!x.value&&z(!1)})),(e,a)=>{const l=f,s=i;return r(),o(s,{class:"page"},{default:n((()=>[v(s,{class:"collection-list"},{default:n((()=>[(r(!0),c(_,null,p(k.value,(e=>(r(),o(w,{key:e.id,news:e,onClick:A},null,8,["news"])))),128)),x.value||0!==k.value.length?d("",!0):(r(),o(j,{key:0,text:"暂无收藏"})),x.value?(r(),o(s,{key:1,class:"loading-more"},{default:n((()=>[v(l,null,{default:n((()=>[m("加载中...")])),_:1})])),_:1})):d("",!0),!q.value&&k.value.length>0?(r(),o(s,{key:2,class:"no-more"},{default:n((()=>[v(l,null,{default:n((()=>[m("没有更多了")])),_:1})])),_:1})):d("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-ef638be2"]]);export{k as default};
