import{u as e,r as a,o as s,g as t,a as l,b as i,s as c,c as o,w as n,i as r,d as u,e as d,f as p,n as m,h as f,j as g,F as _,k as v,l as y,m as h,p as k,S as w,q as C,t as b,v as x,x as I}from"./index-BA-OeFd4.js";import{N as j}from"./news-card.CHXG1YTM.js";import{C as z}from"./course-card.3HxFFqMZ.js";import{E as L}from"./empty-view.BTAzOfaH.js";import{I as T}from"./icon.DZSIreks.js";import{g as $}from"./news.DNtdDH2m.js";import{g as U}from"./association.BQj1HP2m.js";import{g as D}from"./notification.fuGCRGQF.js";import{g as E,a as N}from"./system.B1fgUV9b.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./util.SBHl27LX.js";/* empty css                                                                    *//* empty css                                                                   */const F=S({__name:"index",setup(S){const F=e(),O=a(0),P=a(0),R=a(0),A=a(0),H=a({appLogo:"/static/images/logo.png"}),M=a([]),q=a(!1),B=a([]),G=a(!1),J=a([]),K=a(!1),V=a([]),W=a(!1);s((()=>{const e=t();O.value=e.statusBarHeight||0,P.value=O.value+60,Y()}));const Y=async()=>{await Promise.all([Q(),X(),ee(),ae(),se()]),F.isLogin&&Z()},Q=async()=>{try{const e=await E();e&&e.appLogo&&(H.value.appLogo=e.appLogo)}catch(e){console.error("加载系统配置失败：",e)}},X=async()=>{try{q.value=!0;const e=await N();M.value=e.map((e=>({id:e.id,image:e.imageUrl,title:e.title,linkType:e.linkType,linkUrl:e.linkUrl,targetId:e.targetId})))}catch(e){console.error("加载轮播图失败：",e),M.value=[{id:"default-1",image:"https://picsum.photos/750/300?random=1",title:"北大汇丰EDP",linkType:"NONE"}]}finally{q.value=!1}},Z=async()=>{try{const e=await D();R.value=e.count||0}catch(e){console.error("获取未读消息数量失败：",e)}},ee=async()=>{G.value=!0;try{const e=await $({page:1,pageSize:3});B.value=e.items||e.data||e.list||[]}catch(e){console.error("加载资讯失败：",e)}finally{G.value=!1}},ae=async()=>{K.value=!0;try{const e=await l({page:1,pageSize:2});J.value=e.items||e.data||e.list||[]}catch(e){console.error("加载课程失败：",e)}finally{K.value=!1}},se=async()=>{W.value=!0;try{const e=await U({page:1,pageSize:3});V.value=e.items||e.data||e.list||[]}catch(e){console.error("加载活动失败：",e)}finally{W.value=!1}},te=e=>{A.value=e.detail.current},le=e=>{y({url:e})},ie=()=>{y({url:"/pages/search/index"})},ce=()=>{if(!F.isLogin)return h({title:"请先登录",icon:"none"}),void setTimeout((()=>{y({url:"/pages/login/index"})}),1500);y({url:"/pages/mine/messages"})},oe=e=>{if(!e)return"";const a=new Date(e),s=(new Date).getTime()-a.getTime(),t=864e5;return s<t?"今天":s<2*t?"昨天":`${a.getMonth()+1}-${a.getDate()}`};return i((async()=>{await Y(),c()})),(e,a)=>{const s=k,t=r,l=I,i=w,c=C;return u(),o(t,{class:"page"},{default:n((()=>[d(t,{class:"page-header",style:m({height:P.value+"px"})},{default:n((()=>[d(t,{class:"header-content"},{default:n((()=>[d(t,{class:"header-logo"},{default:n((()=>[d(s,{src:H.value.appLogo||"/static/images/logo.png",class:"logo-image",mode:"aspectFit"},null,8,["src"])])),_:1}),d(t,{class:"header-actions"},{default:n((()=>[d(t,{class:"action-icon",onClick:ie},{default:n((()=>[d(T,{name:"search",size:44,color:"#333"})])),_:1}),d(t,{class:"action-icon message-icon",onClick:ce},{default:n((()=>[d(T,{name:"message",size:44,color:"#333"}),R.value>0?(u(),o(t,{key:0,class:"badge-dot"})):p("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),d(t,{style:m({height:P.value+"px"})},null,8,["style"]),d(t,{class:"banner-section"},{default:n((()=>[d(i,{class:"banner-swiper","indicator-dots":!1,autoplay:!0,interval:4e3,circular:!0,duration:500,onChange:te},{default:n((()=>[(u(!0),f(_,null,g(M.value,((e,a)=>(u(),o(l,{key:e.id},{default:n((()=>[d(t,{class:"banner-item"},{default:n((()=>[d(s,{src:e.image,mode:"aspectFill",class:"banner-image",onClick:a=>(e=>{switch(e.linkType){case"URL":e.linkUrl&&y({url:`/pages/webview/index?url=${encodeURIComponent(e.linkUrl)}`});break;case"COURSE":e.targetId&&y({url:`/pages/course/detail?id=${e.targetId}`});break;case"NEWS":e.targetId&&y({url:`/pages/news/detail?id=${e.targetId}`});break;case"ACTIVITY":e.targetId&&y({url:`/pages/association/activity-detail?id=${e.targetId}`})}})(e)},null,8,["src","onClick"]),d(t,{class:"banner-overlay"},{default:n((()=>[d(t,{class:"banner-title"},{default:n((()=>[v(b(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),d(t,{class:"custom-indicator"},{default:n((()=>[(u(!0),f(_,null,g(M.value,((e,a)=>(u(),o(t,{key:a,class:x(["indicator-dot",{active:A.value===a}])},null,8,["class"])))),128))])),_:1})])),_:1}),d(t,{class:"section news-section"},{default:n((()=>[d(t,{class:"section-header"},{default:n((()=>[d(t,{class:"section-title-wrapper"},{default:n((()=>[d(t,{class:"section-icon"},{default:n((()=>[d(T,{name:"news",size:40,color:"#C8161D"})])),_:1}),d(t,{class:"section-title-content"},{default:n((()=>[d(c,{class:"section-title"},{default:n((()=>[v("最新资讯")])),_:1}),d(c,{class:"section-subtitle"},{default:n((()=>[v("Latest News")])),_:1})])),_:1})])),_:1}),d(t,{class:"section-more",onClick:a[0]||(a[0]=e=>le("/pages/news/index"))},{default:n((()=>[d(c,null,{default:n((()=>[v("查看全部")])),_:1}),d(T,{name:"arrow-right",size:28,color:"#C8161D"})])),_:1})])),_:1}),d(t,{class:"news-list"},{default:n((()=>[(u(!0),f(_,null,g(B.value,((e,a)=>(u(),o(t,{key:e.id,class:"news-card-enhanced",onClick:a=>{y({url:`/pages/news/detail?id=${e.id}`})}},{default:n((()=>[d(j,{news:e},null,8,["news"])])),_:2},1032,["onClick"])))),128)),G.value||0!==B.value.length?p("",!0):(u(),o(L,{key:0,text:"暂无资讯"}))])),_:1})])),_:1}),d(t,{class:"section course-section"},{default:n((()=>[d(t,{class:"section-header"},{default:n((()=>[d(t,{class:"section-title-wrapper"},{default:n((()=>[d(t,{class:"section-icon"},{default:n((()=>[d(T,{name:"course",size:40,color:"#667eea"})])),_:1}),d(t,{class:"section-title-content"},{default:n((()=>[d(c,{class:"section-title"},{default:n((()=>[v("热门课程")])),_:1}),d(c,{class:"section-subtitle"},{default:n((()=>[v("Popular Courses")])),_:1})])),_:1})])),_:1}),d(t,{class:"section-more",onClick:a[1]||(a[1]=e=>le("/pages/course/index"))},{default:n((()=>[d(c,null,{default:n((()=>[v("查看全部")])),_:1}),d(T,{name:"arrow-right",size:28,color:"#667eea"})])),_:1})])),_:1}),d(t,{class:"course-list"},{default:n((()=>[(u(!0),f(_,null,g(J.value,((e,a)=>(u(),o(t,{key:e.id,class:"course-card-enhanced",onClick:a=>{y({url:`/pages/course/detail?id=${e.id}`})}},{default:n((()=>[d(z,{course:e},null,8,["course"])])),_:2},1032,["onClick"])))),128)),K.value||0!==J.value.length?p("",!0):(u(),o(L,{key:0,text:"暂无课程"}))])),_:1})])),_:1}),d(t,{class:"section activity-section"},{default:n((()=>[d(t,{class:"section-header"},{default:n((()=>[d(t,{class:"section-title-wrapper"},{default:n((()=>[d(t,{class:"section-icon"},{default:n((()=>[d(T,{name:"association",size:40,color:"#f5576c"})])),_:1}),d(t,{class:"section-title-content"},{default:n((()=>[d(c,{class:"section-title"},{default:n((()=>[v("精彩活动")])),_:1}),d(c,{class:"section-subtitle"},{default:n((()=>[v("Activities")])),_:1})])),_:1})])),_:1}),d(t,{class:"section-more",onClick:a[2]||(a[2]=e=>le("/pages/association/index?tab=activity"))},{default:n((()=>[d(c,null,{default:n((()=>[v("查看全部")])),_:1}),d(T,{name:"arrow-right",size:28,color:"#f5576c"})])),_:1})])),_:1}),d(t,{class:"activity-list"},{default:n((()=>[(u(!0),f(_,null,g(V.value,((e,a)=>(u(),o(t,{key:e.id,class:"activity-card-enhanced",onClick:a=>{y({url:`/pages/association/activity-detail?id=${e.id}`})}},{default:n((()=>[d(t,{class:"activity-image-wrapper"},{default:n((()=>[d(s,{src:e.coverImage,mode:"aspectFill",class:"activity-image"},null,8,["src"]),d(t,{class:"image-mask"})])),_:2},1024),d(t,{class:"activity-content"},{default:n((()=>[d(t,{class:"activity-title"},{default:n((()=>[v(b(e.title),1)])),_:2},1024),d(t,{class:"activity-meta"},{default:n((()=>[d(t,{class:"meta-item"},{default:n((()=>[d(T,{name:"time",size:28,color:"#999"}),d(c,{class:"meta-text"},{default:n((()=>[v(b(oe(e.publishTime)),1)])),_:2},1024)])),_:2},1024),d(t,{class:"meta-item"},{default:n((()=>[d(T,{name:"like",size:28,color:"#ff6b6b"}),d(c,{class:"meta-text"},{default:n((()=>[v(b(e.likes||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),W.value||0!==V.value.length?p("",!0):(u(),o(L,{key:0,text:"暂无活动"}))])),_:1})])),_:1}),d(t,{class:"page-footer"})])),_:1})}}},[["__scopeId","data-v-a53a7090"]]);export{F as default};
