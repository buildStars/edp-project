import{u as e,r as a,o as s,g as t,a as l,b as i,s as c,c as o,w as n,i as r,d as u,e as d,f,n as _,h as p,j as m,F as g,k as v,t as y,l as k,m as w,p as h,q as x,v as C,x as b,y as z,S as I,z as j,A as T,B as L}from"./index-Cljxm-NV.js";import{N as $}from"./news-card.DZUxF8n8.js";import{C as D}from"./course-card.BdimI_jI.js";import{E as U}from"./empty-view.C6sbClhI.js";import{I as E}from"./icon.DkV2kXZZ.js";import{g as N}from"./news.DJfprz8c.js";import{g as S}from"./association.BZuSzsP7.js";import{g as F}from"./notification.CKefs3Bn.js";import{g as O,a as P}from"./system.D9DdQo0M.js";import{_ as R}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./util.DiFpgDCN.js";/* empty css                                                                    *//* empty css                                                                   */const A=R({__name:"index",setup(R){const A=e(),q=a(0),B=a(0),H=a(0),M=a(0),V=a({appLogo:"/static/images/logo.png"}),G=a([]),J=a(!1),K=a([]),W=a(!1),Y=a([]),Q=a(!1),X=a([]),Z=a(!1);s((()=>{const e=t();q.value=e.statusBarHeight||0,B.value=q.value+60,ee()}));const ee=async()=>{await Promise.all([ae(),se(),le(),ie(),ce()]),A.isLogin&&te()},ae=async()=>{try{const e=await O();e&&e.appLogo&&(V.value.appLogo=e.appLogo)}catch(e){console.error("åŠ è½½ç³»ç»Ÿé…ç½®å¤±è´¥ï¼š",e)}},se=async()=>{try{J.value=!0;const e=await P();G.value=e.map((e=>({id:e.id,image:e.imageUrl,title:e.title,linkType:e.linkType,linkUrl:e.linkUrl,targetId:e.targetId})))}catch(e){console.error("åŠ è½½è½®æ’­å›¾å¤±è´¥ï¼š",e),G.value=[{id:"default-1",image:"https://picsum.photos/750/300?random=1",title:"åŒ—å¤§æ±‡ä¸°EDP",linkType:"NONE"}]}finally{J.value=!1}},te=async()=>{try{const e=await F();H.value=e.count||0}catch(e){console.error("èŽ·å–æœªè¯»æ¶ˆæ¯æ•°é‡å¤±è´¥ï¼š",e)}},le=async()=>{W.value=!0;try{const e=await N({page:1,pageSize:3});K.value=e.items||e.data||e.list||[]}catch(e){console.error("åŠ è½½èµ„è®¯å¤±è´¥ï¼š",e)}finally{W.value=!1}},ie=async()=>{Q.value=!0;try{const e=await l({page:1,pageSize:2});Y.value=e.items||e.data||e.list||[]}catch(e){console.error("åŠ è½½è¯¾ç¨‹å¤±è´¥ï¼š",e)}finally{Q.value=!1}},ce=async()=>{Z.value=!0;try{const e=await S({page:1,pageSize:3});X.value=e.items||e.data||e.list||[]}catch(e){console.error("åŠ è½½æ´»åŠ¨å¤±è´¥ï¼š",e)}finally{Z.value=!1}},oe=e=>{M.value=e.detail.current},ne=()=>{w({url:"/pages/course/index"})},re=()=>{h("association_tab","activity"),w({url:"/pages/association/index"})},ue=e=>{const a=x();a.select(`#${e}`).boundingClientRect(),a.selectViewport().scrollOffset(),a.exec((e=>{if(e[0]){const a=e[0].top,s=e[1].scrollTop+a-B.value-20;C({scrollTop:s,duration:300})}}))},de=()=>{k({url:"/pages/search/index"})},fe=()=>{if(!A.isLogin)return b({title:"è¯·å…ˆç™»å½•",icon:"none"}),void setTimeout((()=>{k({url:"/pages/login/index"})}),1500);k({url:"/pages/mine/messages"})},_e=e=>{if(!e)return"";const a=new Date(e),s=(new Date).getTime()-a.getTime(),t=864e5;return s<t?"ä»Šå¤©":s<2*t?"æ˜¨å¤©":`${a.getMonth()+1}-${a.getDate()}`};return i((async()=>{await ee(),c()})),(e,a)=>{const s=z,t=r,l=L,i=I,c=j;return u(),o(t,{class:"page"},{default:n((()=>[d(t,{class:"page-header",style:_({height:B.value+"px"})},{default:n((()=>[d(t,{class:"header-content"},{default:n((()=>[d(t,{class:"header-logo"},{default:n((()=>[d(s,{src:V.value.appLogo||"/static/images/logo.png",class:"logo-image",mode:"aspectFit"},null,8,["src"])])),_:1}),d(t,{class:"header-actions"},{default:n((()=>[d(t,{class:"action-icon",onClick:de},{default:n((()=>[d(E,{name:"search",size:44,color:"#333"})])),_:1}),d(t,{class:"action-icon message-icon",onClick:fe},{default:n((()=>[d(E,{name:"message",size:44,color:"#333"}),H.value>0?(u(),o(t,{key:0,class:"badge-dot"})):f("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),d(t,{style:_({height:B.value+"px"})},null,8,["style"]),d(t,{class:"banner-section"},{default:n((()=>[d(i,{class:"banner-swiper","indicator-dots":!1,autoplay:!0,interval:4e3,circular:!0,duration:500,onChange:oe},{default:n((()=>[(u(!0),p(g,null,m(G.value,((e,a)=>(u(),o(l,{key:e.id},{default:n((()=>[d(t,{class:"banner-item"},{default:n((()=>[d(s,{src:e.image,mode:"aspectFill",class:"banner-image",onClick:a=>(e=>{switch(e.linkType){case"URL":e.linkUrl&&k({url:`/pages/webview/index?url=${encodeURIComponent(e.linkUrl)}`});break;case"COURSE":e.targetId&&k({url:`/pages/course/detail?id=${e.targetId}`});break;case"NEWS":e.targetId&&k({url:`/pages/news/detail?id=${e.targetId}`});break;case"ACTIVITY":e.targetId&&k({url:`/pages/association/activity-detail?id=${e.targetId}`})}})(e)},null,8,["src","onClick"]),d(t,{class:"banner-overlay"},{default:n((()=>[d(t,{class:"banner-title"},{default:n((()=>[v(y(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),d(t,{class:"custom-indicator"},{default:n((()=>[(u(!0),p(g,null,m(G.value,((e,a)=>(u(),o(t,{key:a,class:T(["indicator-dot",{active:M.value===a}])},null,8,["class"])))),128))])),_:1})])),_:1}),d(t,{class:"intro-section"},{default:n((()=>[d(t,{class:"intro-card"},{default:n((()=>[d(t,{class:"intro-header"},{default:n((()=>[d(t,{class:"intro-icon"},{default:n((()=>[v("ðŸ›ï¸")])),_:1}),d(t,{class:"intro-title"},{default:n((()=>[v(y(V.value.appName||"EDP æ•™è‚²å¹³å°"),1)])),_:1})])),_:1}),d(t,{class:"intro-content"},{default:n((()=>[d(c,{class:"intro-text"},{default:n((()=>[v(y(V.value.appDescription||"è‡´åŠ›äºŽä¸ºä¼ä¸šé«˜ç®¡å’ŒèŒä¸šç»ç†äººæä¾›ä¸“ä¸šçš„æ•™è‚²åŸ¹è®­æœåŠ¡ï¼Œæ‰“é€ ä¸€æµçš„ä¼ä¸šåŸ¹è®­å¹³å°ã€‚"),1)])),_:1})])),_:1}),d(t,{class:"intro-features"},{default:n((()=>[d(t,{class:"feature-tag"},{default:n((()=>[v("ä¸“ä¸šåŸ¹è®­")])),_:1}),d(t,{class:"feature-tag"},{default:n((()=>[v("ç²¾å“è¯¾ç¨‹")])),_:1}),d(t,{class:"feature-tag"},{default:n((()=>[v("ä¼˜è´¨æœåŠ¡")])),_:1})])),_:1})])),_:1})])),_:1}),d(t,{class:"quick-nav"},{default:n((()=>[d(t,{class:"nav-item",onClick:a[0]||(a[0]=e=>ue("news-section"))},{default:n((()=>[d(t,{class:"nav-icon gradient-red"},{default:n((()=>[d(E,{name:"news",size:48,color:"#fff"})])),_:1}),d(c,{class:"nav-text"},{default:n((()=>[v("æœ€æ–°èµ„è®¯")])),_:1}),d(c,{class:"nav-desc"},{default:n((()=>[v("äº†è§£æœ€æ–°åŠ¨æ€")])),_:1})])),_:1}),d(t,{class:"nav-item",onClick:a[1]||(a[1]=e=>ue("course-section"))},{default:n((()=>[d(t,{class:"nav-icon gradient-blue"},{default:n((()=>[d(E,{name:"course",size:48,color:"#fff"})])),_:1}),d(c,{class:"nav-text"},{default:n((()=>[v("çƒ­é—¨è¯¾ç¨‹")])),_:1}),d(c,{class:"nav-desc"},{default:n((()=>[v("ç²¾é€‰ä¼˜è´¨è¯¾ç¨‹")])),_:1})])),_:1}),d(t,{class:"nav-item",onClick:a[2]||(a[2]=e=>ue("activity-section"))},{default:n((()=>[d(t,{class:"nav-icon gradient-pink"},{default:n((()=>[d(E,{name:"association",size:48,color:"#fff"})])),_:1}),d(c,{class:"nav-text"},{default:n((()=>[v("ç²¾å½©æ´»åŠ¨")])),_:1}),d(c,{class:"nav-desc"},{default:n((()=>[v("å‚ä¸Žäº’åŠ¨äº¤æµ")])),_:1})])),_:1})])),_:1}),d(t,{id:"news-section",class:"section news-section"},{default:n((()=>[d(t,{class:"section-header"},{default:n((()=>[d(t,{class:"section-title-wrapper"},{default:n((()=>[d(t,{class:"section-icon"},{default:n((()=>[d(E,{name:"news",size:40,color:"#C8161D"})])),_:1}),d(t,{class:"section-title-content"},{default:n((()=>[d(c,{class:"section-title"},{default:n((()=>[v("æœ€æ–°èµ„è®¯")])),_:1}),d(c,{class:"section-subtitle"},{default:n((()=>[v("Latest News")])),_:1})])),_:1})])),_:1}),d(t,{class:"section-more",onClick:a[3]||(a[3]=e=>{k({url:"/pages/news/index"})})},{default:n((()=>[d(c,null,{default:n((()=>[v("æŸ¥çœ‹å…¨éƒ¨")])),_:1}),d(E,{name:"arrow-right",size:28,color:"#C8161D"})])),_:1})])),_:1}),d(t,{class:"news-list"},{default:n((()=>[(u(!0),p(g,null,m(K.value,((e,a)=>(u(),o(t,{key:e.id,class:"news-card-enhanced",onClick:a=>{k({url:`/pages/news/detail?id=${e.id}`})}},{default:n((()=>[d($,{news:e},null,8,["news"])])),_:2},1032,["onClick"])))),128)),W.value||0!==K.value.length?f("",!0):(u(),o(U,{key:0,text:"æš‚æ— èµ„è®¯"}))])),_:1})])),_:1}),d(t,{id:"course-section",class:"section course-section"},{default:n((()=>[d(t,{class:"section-header"},{default:n((()=>[d(t,{class:"section-title-wrapper"},{default:n((()=>[d(t,{class:"section-icon"},{default:n((()=>[d(E,{name:"course",size:40,color:"#667eea"})])),_:1}),d(t,{class:"section-title-content"},{default:n((()=>[d(c,{class:"section-title"},{default:n((()=>[v("çƒ­é—¨è¯¾ç¨‹")])),_:1}),d(c,{class:"section-subtitle"},{default:n((()=>[v("Popular Courses")])),_:1})])),_:1})])),_:1}),d(t,{class:"section-more",onClick:ne},{default:n((()=>[d(c,null,{default:n((()=>[v("æŸ¥çœ‹å…¨éƒ¨")])),_:1}),d(E,{name:"arrow-right",size:28,color:"#667eea"})])),_:1})])),_:1}),d(t,{class:"course-list"},{default:n((()=>[(u(!0),p(g,null,m(Y.value,((e,a)=>(u(),o(t,{key:e.id,class:"course-card-enhanced",onClick:a=>{k({url:`/pages/course/detail?id=${e.id}`})}},{default:n((()=>[d(D,{course:e},null,8,["course"])])),_:2},1032,["onClick"])))),128)),Q.value||0!==Y.value.length?f("",!0):(u(),o(U,{key:0,text:"æš‚æ— è¯¾ç¨‹"}))])),_:1})])),_:1}),d(t,{id:"activity-section",class:"section activity-section"},{default:n((()=>[d(t,{class:"section-header"},{default:n((()=>[d(t,{class:"section-title-wrapper"},{default:n((()=>[d(t,{class:"section-icon"},{default:n((()=>[d(E,{name:"association",size:40,color:"#f5576c"})])),_:1}),d(t,{class:"section-title-content"},{default:n((()=>[d(c,{class:"section-title"},{default:n((()=>[v("ç²¾å½©æ´»åŠ¨")])),_:1}),d(c,{class:"section-subtitle"},{default:n((()=>[v("Activities")])),_:1})])),_:1})])),_:1}),d(t,{class:"section-more",onClick:re},{default:n((()=>[d(c,null,{default:n((()=>[v("æŸ¥çœ‹å…¨éƒ¨")])),_:1}),d(E,{name:"arrow-right",size:28,color:"#f5576c"})])),_:1})])),_:1}),d(t,{class:"activity-list"},{default:n((()=>[(u(!0),p(g,null,m(X.value,((e,a)=>(u(),o(t,{key:e.id,class:"activity-card-enhanced",onClick:a=>{k({url:`/pages/association/activity-detail?id=${e.id}`})}},{default:n((()=>[d(t,{class:"activity-image-wrapper"},{default:n((()=>[d(s,{src:e.coverImage,mode:"aspectFill",class:"activity-image"},null,8,["src"]),d(t,{class:"image-mask"})])),_:2},1024),d(t,{class:"activity-content"},{default:n((()=>[d(t,{class:"activity-title"},{default:n((()=>[v(y(e.title),1)])),_:2},1024),d(t,{class:"activity-meta"},{default:n((()=>[d(t,{class:"meta-item"},{default:n((()=>[d(E,{name:"time",size:28,color:"#999"}),d(c,{class:"meta-text"},{default:n((()=>[v(y(_e(e.publishTime)),1)])),_:2},1024)])),_:2},1024),d(t,{class:"meta-item"},{default:n((()=>[d(E,{name:"like",size:28,color:"#ff6b6b"}),d(c,{class:"meta-text"},{default:n((()=>[v(y(e.likes||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),Z.value||0!==X.value.length?f("",!0):(u(),o(U,{key:0,text:"æš‚æ— æ´»åŠ¨"}))])),_:1})])),_:1}),d(t,{class:"page-footer"})])),_:1})}}},[["__scopeId","data-v-89797556"]]);export{A as default};
