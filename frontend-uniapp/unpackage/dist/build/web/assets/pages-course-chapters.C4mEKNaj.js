import{r as a,B as e,g as s,X as t,m as l,c,w as u,i as o,d as r,e as d,n as i,k as n,t as _,f,h,j as v,F as p,p as m,q as g,v as y,l as k}from"./index-BA-OeFd4.js";import{g as x}from"./chapter.Cd5yshot.js";import{C as I}from"./custom-navbar.CczeCHJz.js";import{E as C}from"./empty-view.BTAzOfaH.js";import{I as b}from"./icon.DZSIreks.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";/* empty css                                                                      *//* empty css                                                                   */const E=j({__name:"chapters",setup(j){const E=a(88),w=a(""),z=a(""),F=a(null),D=a([]),L=a(!1);e((a=>{console.log("章节页面参数:",a);const e=s().statusBarHeight||0;if(E.value=e+44,w.value=a.courseId,a.courseTitle)try{z.value=decodeURIComponent(a.courseTitle)}catch(t){z.value=a.courseTitle}else z.value="课程章节";w.value&&(T(),B())}));const T=async()=>{try{const a=await t(w.value);F.value=a}catch(a){console.error("加载课程信息失败:",a)}},B=async()=>{if(!L.value){L.value=!0;try{const a=await x({courseId:w.value,status:"PUBLISHED"});D.value=a.items||[]}catch(a){console.error("加载章节列表失败:",a),l({title:"加载失败",icon:"none"})}finally{L.value=!1}}},P=a=>({DRAFT:"草稿",PUBLISHED:"已发布",COMPLETED:"已完成"}[a]||"未知");return(a,e)=>{const s=o,t=m,l=g;return r(),c(s,{class:"page"},{default:u((()=>[d(I,{title:z.value||"课程章节","show-back":!0},null,8,["title"]),d(s,{class:"navbar-placeholder",style:i({height:E.value+"px"})},null,8,["style"]),F.value?(r(),c(s,{key:0,class:"course-header"},{default:u((()=>[d(s,{class:"course-cover"},{default:u((()=>[d(t,{src:F.value.coverImage||"/static/images/logo.png",mode:"aspectFill",class:"cover-image"},null,8,["src"]),d(s,{class:"course-badge"},{default:u((()=>[d(l,{class:"badge-text"},{default:u((()=>[n(_(D.value.length)+"个章节",1)])),_:1})])),_:1})])),_:1}),d(s,{class:"course-info"},{default:u((()=>[d(s,{class:"course-title"},{default:u((()=>[n(_(F.value.title),1)])),_:1}),d(s,{class:"course-teacher"},{default:u((()=>[d(b,{name:"teacher",size:28,color:"#999"}),d(l,null,{default:u((()=>[n(_(F.value.teacherName),1)])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),d(s,{class:"chapter-list"},{default:u((()=>[d(s,{class:"list-header"},{default:u((()=>[d(l,{class:"header-title"},{default:u((()=>[n("课程章节")])),_:1}),d(l,{class:"header-count"},{default:u((()=>[n("共"+_(D.value.length)+"节",1)])),_:1})])),_:1}),(r(!0),h(p,null,v(D.value,((a,e)=>(r(),c(s,{key:a.id,class:"chapter-item",onClick:e=>(a=>{k({url:`/pages/course/chapter-detail?chapterId=${a.id}`})})(a)},{default:u((()=>[d(s,{class:"chapter-index"},{default:u((()=>[d(s,{class:"index-circle"},{default:u((()=>[d(l,{class:"index-number"},{default:u((()=>[n(_(e+1),1)])),_:2},1024)])),_:2},1024),e<D.value.length-1?(r(),c(s,{key:0,class:"index-line"})):f("",!0)])),_:2},1024),d(s,{class:"chapter-card"},{default:u((()=>[d(s,{class:"chapter-header"},{default:u((()=>{return[d(s,{class:"chapter-title"},{default:u((()=>[n(_(a.title),1)])),_:2},1024),d(s,{class:y(["chapter-status",(e=a.status,`status-${e.toLowerCase()}`)])},{default:u((()=>[n(_(P(a.status)),1)])),_:2},1032,["class"])];var e})),_:2},1024),a.description?(r(),c(s,{key:0,class:"chapter-desc"},{default:u((()=>[n(_(a.description),1)])),_:2},1024)):f("",!0),d(s,{class:"chapter-footer"},{default:u((()=>[d(s,{class:"chapter-info"},{default:u((()=>[a.duration?(r(),c(s,{key:0,class:"info-item"},{default:u((()=>[d(b,{name:"time",size:28,color:"#999"}),d(l,null,{default:u((()=>[n(_(a.duration)+"分钟",1)])),_:2},1024)])),_:2},1024)):f("",!0),a.location?(r(),c(s,{key:1,class:"info-item"},{default:u((()=>[d(b,{name:"location",size:28,color:"#999"}),d(l,null,{default:u((()=>[n(_(a.location),1)])),_:2},1024)])),_:2},1024)):f("",!0)])),_:2},1024),d(s,{class:"chapter-actions"},{default:u((()=>[d(s,{class:"action-btn"},{default:u((()=>[d(b,{name:"arrow-right",size:32,color:"#C8161D"})])),_:1})])),_:1})])),_:2},1024),d(s,{class:"chapter-status-bar"},{default:u((()=>[d(s,{class:"status-item"},{default:u((()=>[d(b,{name:"course",size:28,color:"#999"}),d(l,{class:"status-text"},{default:u((()=>{var e;return[n(_((null==(e=a._count)?void 0:e.materials)||0)+"份课件",1)]})),_:2},1024)])),_:2},1024),d(s,{class:"status-divider"}),d(s,{class:y(["status-item",a.hasCheckedIn?"status-success":"status-default"])},{default:u((()=>[d(b,{name:a.hasCheckedIn?"check":"close",size:28,color:a.hasCheckedIn?"#52C41A":"#999"},null,8,["name","color"]),d(l,{class:"status-text"},{default:u((()=>[n(_(a.hasCheckedIn?"已签到":"未签到"),1)])),_:2},1024)])),_:2},1032,["class"]),d(s,{class:"status-divider"}),d(s,{class:y(["status-item",a.hasEvaluated?"status-success":"status-default"])},{default:u((()=>[d(b,{name:a.hasEvaluated?"star":"star-o",size:28,color:a.hasEvaluated?"#FF9800":"#999"},null,8,["name","color"]),d(l,{class:"status-text"},{default:u((()=>[n(_(a.hasEvaluated?"已评价":"未评价"),1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),L.value||0!==D.value.length?f("",!0):(r(),c(C,{key:0,text:"该课程暂无章节"})),L.value?(r(),c(s,{key:1,class:"loading-container"},{default:u((()=>[d(l,{class:"loading-text"},{default:u((()=>[n("加载中...")])),_:1})])),_:1})):f("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-054a94d1"]]);export{E as default};
