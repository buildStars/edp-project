import{u as e,r as a,B as l,C as s,X as t,D as o,m as c,c as u,w as d,i as r,d as n,e as i,k as m,t as p,N as f,a9 as _,ae as v,p as h,q as V,a2 as g,af as b,T as y}from"./index-CCW0MaS3.js";import{c as x}from"./enrollment-request.Dte2rZey.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=N({__name:"create",setup(N){const I=e(),k=a(""),w=a({title:"",coverImage:"",credit:0}),C=a({realName:"",phone:"",company:"",position:"",remark:""}),U=a(!1);l((async e=>{k.value=e.courseId;try{s({title:"加载中..."});const e=await t(k.value);w.value=e;const a=I.userInfo||{};C.value.realName=a.realName||"",C.value.phone=a.phone||"",C.value.company=a.company||"",C.value.position=a.position||"",await I.fetchCredits(),o()}catch(a){o(),c({title:a.msg||"加载失败",icon:"none"})}}));const q=async()=>{if(C.value.realName)if(C.value.phone)if(/^1[3-9]\d{9}$/.test(C.value.phone))try{U.value=!0,await x({courseId:k.value,...C.value}),U.value=!1,f({title:"提交成功",content:"您的试听申请已提交，课程顾问将尽快与您联系安排试听。",showCancel:!1,success:()=>{_({delta:1,success:()=>{v("refreshCourseDetail")}})}})}catch(e){U.value=!1,c({title:e.msg||"提交失败",icon:"none"})}else c({title:"请输入正确的手机号",icon:"none"});else c({title:"请输入手机号",icon:"none"});else c({title:"请输入真实姓名",icon:"none"})};return(e,a)=>{const l=h,s=V,t=r,o=g,c=b,f=y;return n(),u(t,{class:"page"},{default:d((()=>[i(t,{class:"course-card"},{default:d((()=>[i(l,{src:w.value.coverImage,class:"cover",mode:"aspectFill"},null,8,["src"]),i(t,{class:"course-info"},{default:d((()=>[i(s,{class:"title"},{default:d((()=>[m(p(w.value.title),1)])),_:1}),i(t,{class:"course-meta"},{default:d((()=>[i(t,{class:"meta-item"},{default:d((()=>[i(s,{class:"meta-label"},{default:d((()=>[m("授课老师")])),_:1}),i(s,{class:"meta-value"},{default:d((()=>[m(p(w.value.teacherName),1)])),_:1})])),_:1}),i(t,{class:"meta-item"},{default:d((()=>[i(s,{class:"meta-label"},{default:d((()=>[m("需要学分")])),_:1}),i(s,{class:"meta-value highlight"},{default:d((()=>[m(p(w.value.credit)+"学分",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i(t,{class:"form-section"},{default:d((()=>[i(t,{class:"section-title"},{default:d((()=>[m("试听申请")])),_:1}),i(t,{class:"form-item required"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("真实姓名")])),_:1}),i(o,{modelValue:C.value.realName,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value.realName=e),placeholder:"请输入真实姓名","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item required"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("手机号")])),_:1}),i(o,{modelValue:C.value.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value.phone=e),type:"number",placeholder:"请输入手机号","placeholder-class":"placeholder",maxlength:"11"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("公司")])),_:1}),i(o,{modelValue:C.value.company,"onUpdate:modelValue":a[2]||(a[2]=e=>C.value.company=e),placeholder:"请输入公司名称（可选）","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("职位")])),_:1}),i(o,{modelValue:C.value.position,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value.position=e),placeholder:"请输入职位（可选）","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("备注")])),_:1}),i(c,{modelValue:C.value.remark,"onUpdate:modelValue":a[4]||(a[4]=e=>C.value.remark=e),placeholder:"其他说明（可选）","placeholder-class":"placeholder",maxlength:"200"},null,8,["modelValue"])])),_:1})])),_:1}),i(t,{class:"tip-section"},{default:d((()=>[i(t,{class:"tip-icon"},{default:d((()=>[m("ℹ️")])),_:1}),i(t,{class:"tip-content"},{default:d((()=>[i(s,{class:"tip-title"},{default:d((()=>[m("温馨提示")])),_:1}),i(s,{class:"tip-text"},{default:d((()=>[m("• 提交后，课程顾问将在1个工作日内联系您")])),_:1}),i(s,{class:"tip-text"},{default:d((()=>[m("• 试听名额有限，请提前预约")])),_:1}),i(s,{class:"tip-text"},{default:d((()=>[m("• 课程顾问电话：40077-20111")])),_:1})])),_:1})])),_:1}),i(t,{class:"footer"},{default:d((()=>[i(f,{class:"btn-submit",onClick:q,loading:U.value},{default:d((()=>[m(" 提交申请 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-a34c1256"]]);export{I as default};
