import{u as e,r as l,G as a,H as s,a3 as t,I as u,x as c,c as o,w as d,i as r,d as n,e as i,k as m,t as f,Q as p,ae as _,aj as h,y as v,z as V,a8 as g,ak as x,R as y}from"./index-Cljxm-NV.js";import{c as b}from"./enrollment-request.Dr-R5cxm.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const N=I({__name:"create",setup(I){const N=e(),k=l(""),w=l({title:"",coverImage:"",credit:0}),U=l({realName:"",phone:"",company:"",position:"",remark:""}),j=l(!1);a((async e=>{k.value=e.courseId;try{s({title:"加载中..."});const e=await t(k.value);w.value=e;const l=N.userInfo||{};U.value.realName=l.realName||"",U.value.phone=l.phone||"",U.value.company=l.company||"",U.value.position=l.position||"",await N.fetchCredits(),u()}catch(l){u(),c({title:l.msg||"加载失败",icon:"none"})}}));const C=async()=>{if(U.value.realName)if(U.value.phone)if(/^1[3-9]\d{9}$/.test(U.value.phone))try{j.value=!0,await b({courseId:k.value,...U.value}),j.value=!1,p({title:"提交成功",content:"您的试听申请已提交，课程顾问将尽快与您联系安排试听。",showCancel:!1,success:()=>{_({delta:1,success:()=>{h("refreshCourseDetail")}})}})}catch(e){j.value=!1,c({title:e.msg||"提交失败",icon:"none"})}else c({title:"请输入正确的手机号",icon:"none"});else c({title:"请输入手机号",icon:"none"});else c({title:"请输入真实姓名",icon:"none"})};return(e,l)=>{const a=v,s=V,t=r,u=g,c=x,p=y;return n(),o(t,{class:"page"},{default:d((()=>[i(t,{class:"course-card"},{default:d((()=>[i(a,{src:w.value.coverImage,class:"cover",mode:"aspectFill"},null,8,["src"]),i(t,{class:"course-info"},{default:d((()=>[i(s,{class:"title"},{default:d((()=>[m(f(w.value.title),1)])),_:1}),i(t,{class:"course-meta"},{default:d((()=>[i(t,{class:"meta-item"},{default:d((()=>[i(s,{class:"meta-label"},{default:d((()=>[m("授课老师")])),_:1}),i(s,{class:"meta-value"},{default:d((()=>[m(f(w.value.teacherName),1)])),_:1})])),_:1}),i(t,{class:"meta-item"},{default:d((()=>[i(s,{class:"meta-label"},{default:d((()=>[m("需要学分")])),_:1}),i(s,{class:"meta-value highlight"},{default:d((()=>[m(f(w.value.credit)+"学分",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i(t,{class:"form-section"},{default:d((()=>[i(t,{class:"section-title"},{default:d((()=>[m("试听申请")])),_:1}),i(t,{class:"form-item required"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("真实姓名")])),_:1}),i(u,{modelValue:U.value.realName,"onUpdate:modelValue":l[0]||(l[0]=e=>U.value.realName=e),placeholder:"请输入真实姓名","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item required"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("手机号")])),_:1}),i(u,{modelValue:U.value.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>U.value.phone=e),type:"number",placeholder:"请输入手机号","placeholder-class":"placeholder",maxlength:"11"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("公司")])),_:1}),i(u,{modelValue:U.value.company,"onUpdate:modelValue":l[2]||(l[2]=e=>U.value.company=e),placeholder:"请输入公司名称（可选）","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("职位")])),_:1}),i(u,{modelValue:U.value.position,"onUpdate:modelValue":l[3]||(l[3]=e=>U.value.position=e),placeholder:"请输入职位（可选）","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),i(t,{class:"form-item"},{default:d((()=>[i(s,{class:"label"},{default:d((()=>[m("备注")])),_:1}),i(c,{modelValue:U.value.remark,"onUpdate:modelValue":l[4]||(l[4]=e=>U.value.remark=e),placeholder:"其他说明（可选）","placeholder-class":"placeholder",maxlength:"200"},null,8,["modelValue"])])),_:1})])),_:1}),i(t,{class:"tip-section"},{default:d((()=>[i(t,{class:"tip-icon"},{default:d((()=>[m("ℹ️")])),_:1}),i(t,{class:"tip-content"},{default:d((()=>[i(s,{class:"tip-title"},{default:d((()=>[m("温馨提示")])),_:1}),i(s,{class:"tip-text"},{default:d((()=>[m("• 提交后，课程顾问将在1个工作日内联系您")])),_:1}),i(s,{class:"tip-text"},{default:d((()=>[m("• 试听名额有限，请提前预约")])),_:1}),i(s,{class:"tip-text"},{default:d((()=>[m("• 课程顾问电话：40077-20111")])),_:1})])),_:1})])),_:1}),i(t,{class:"refund-rule-section"},{default:d((()=>[i(t,{class:"rule-icon"},{default:d((()=>[m("⚠️")])),_:1}),i(t,{class:"rule-content"},{default:d((()=>[i(s,{class:"rule-title"},{default:d((()=>[m("退课规则")])),_:1}),i(s,{class:"rule-text"},{default:d((()=>[m("• 上课前48小时以外退课：扣除5%手续费，无需审批")])),_:1}),i(s,{class:"rule-text highlight"},{default:d((()=>[m("• 上课前48小时内退课：需填写退课原因并提交管理员审批")])),_:1}),i(s,{class:"rule-text"},{default:d((()=>[m("• 请合理安排学习计划，避免临时退课")])),_:1})])),_:1})])),_:1}),i(t,{class:"footer"},{default:d((()=>[i(p,{class:"btn-submit",onClick:C,loading:j.value},{default:d((()=>[m(" 提交申请 ")])),_:1},8,["loading"])])),_:1})])),_:1})}}},[["__scopeId","data-v-5f649411"]]);export{N as default};
