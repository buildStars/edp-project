import{T as e,d as a,c as t,w as l,e as s,k as i,t as c,f as u,y as n,i as o,z as r,r as d,g as v,D as _,o as y,n as f,h as k,j as m,F as p,x as h,H as g,I as w,ae as C,a8 as b,af as x,A as j,l as z}from"./index-Cljxm-NV.js";import{I}from"./icon.DkV2kXZZ.js";import{N as E}from"./news-card.DZUxF8n8.js";import{C as F}from"./course-card.BdimI_jI.js";import{a as T}from"./util.DiFpgDCN.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as $}from"./empty-view.C6sbClhI.js";/* empty css                                                                    *//* empty css                                                                   */const D=V({__name:"activity-card",props:{activity:{type:Object,required:!0}},emits:["click"],setup(e,{emit:d}){const v=e,_=d,y=()=>{_("click",v.activity)},f=e=>{console.warn("æ´»åŠ¨å°é¢å›¾åŠ è½½å¤±è´¥:",v.activity.id)};return(d,v)=>{const _=n,k=o,m=r;return a(),t(k,{class:"activity-card",onClick:y},{default:l((()=>[s(_,{src:e.activity.coverImage||"/static/images/placeholder.png",class:"activity-image",mode:"aspectFill","lazy-load":"",onError:f},null,8,["src"]),s(k,{class:"activity-info"},{default:l((()=>[s(k,{class:"activity-title"},{default:l((()=>[i(c(e.activity.title),1)])),_:1}),s(k,{class:"activity-meta"},{default:l((()=>[s(m,{class:"meta-item"},{default:l((()=>{return[i(c((a=e.activity.publishTime,T(a))),1)];var a})),_:1}),s(m,{class:"meta-item"},{default:l((()=>[i(c(e.activity.views||0)+" é˜…è¯»",1)])),_:1}),e.activity.likes?(a(),t(m,{key:0,class:"meta-item"},{default:l((()=>[i(" â¤ï¸ "+c(e.activity.likes),1)])),_:1})):u("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ba1c955b"]]),H=V({__name:"index",setup(n){const T=d(v().statusBarHeight||20),V=d(""),H=d("all"),N=d(!1),O=d({news:[],courses:[],activities:[],total:0}),q=d([]),A=_((()=>[{key:"all",label:"å…¨éƒ¨",count:O.value.total},{key:"news",label:"èµ„è®¯",count:O.value.news.length},{key:"course",label:"è¯¾ç¨‹",count:O.value.courses.length},{key:"activity",label:"æ´»åŠ¨",count:O.value.activities.length}]));y((()=>{B()}));const B=async()=>{try{const a=await e("/api/search/hot");q.value=a||[]}catch(a){console.error("åŠ è½½çƒ­é—¨å…³é”®è¯å¤±è´¥ï¼š",a)}},G=async()=>{if(V.value&&""!==V.value.trim())try{g({title:"æœç´¢ä¸­..."});const a=await function(a,t){const l={keyword:a};return t&&(l.type=t),e("/api/search",l)}(V.value.trim());O.value=a,N.value=!0,H.value="all",w()}catch(a){console.error("æœç´¢å¤±è´¥ï¼š",a),w(),h({title:"æœç´¢å¤±è´¥",icon:"none"})}else h({title:"è¯·è¾“å…¥æœç´¢å…³é”®è¯",icon:"none"})},L=()=>{V.value="",N.value=!1,O.value={news:[],courses:[],activities:[],total:0}},M=e=>{V.value=e,G()},U=()=>{C()},J=e=>{z({url:`/pages/news/detail?id=${e}`})},K=e=>{z({url:`/pages/course/detail?id=${e}`})},P=e=>{z({url:`/pages/association/activity-detail?id=${e}`})};return(e,n)=>{const d=b,v=o,_=r,y=x;return a(),t(v,{class:"page"},{default:l((()=>[s(v,{class:"search-bar",style:f({paddingTop:T.value+"px"})},{default:l((()=>[s(v,{class:"search-input-wrapper"},{default:l((()=>[s(I,{name:"search",size:36,color:"#999"}),s(d,{modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=e=>V.value=e),class:"search-input",placeholder:"æœç´¢èµ„è®¯ã€è¯¾ç¨‹ã€æ´»åŠ¨","confirm-type":"search",onConfirm:G},null,8,["modelValue"]),V.value?(a(),t(I,{key:0,name:"close",size:32,color:"#999",onClick:L})):u("",!0)])),_:1}),s(_,{class:"cancel-btn",onClick:U},{default:l((()=>[i("å–æ¶ˆ")])),_:1})])),_:1},8,["style"]),N.value?(a(),t(v,{key:0,class:"result-tabs"},{default:l((()=>[(a(!0),k(p,null,m(A.value,(e=>(a(),t(v,{key:e.key,class:j(["tab-item",{active:H.value===e.key}]),onClick:a=>(e=>{H.value=e})(e.key)},{default:l((()=>[s(_,{class:"tab-text"},{default:l((()=>[i(c(e.label),1)])),_:2},1024),e.count>0?(a(),t(_,{key:0,class:"tab-count"},{default:l((()=>[i("("+c(e.count)+")",1)])),_:2},1024)):u("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})):u("",!0),N.value?(a(),t(y,{key:1,class:"result-content","scroll-y":""},{default:l((()=>["all"===H.value?(a(),t(v,{key:0},{default:l((()=>[O.value.news.length>0?(a(),t(v,{key:0,class:"result-section"},{default:l((()=>[s(v,{class:"section-header"},{default:l((()=>[s(_,{class:"section-title"},{default:l((()=>[i("èµ„è®¯")])),_:1}),s(_,{class:"section-count"},{default:l((()=>[i(c(O.value.news.length),1)])),_:1})])),_:1}),(a(!0),k(p,null,m(O.value.news,(e=>(a(),t(v,{key:e.id,class:"result-item",onClick:a=>J(e.id)},{default:l((()=>[s(E,{news:e},null,8,["news"])])),_:2},1032,["onClick"])))),128))])),_:1})):u("",!0),O.value.courses.length>0?(a(),t(v,{key:1,class:"result-section"},{default:l((()=>[s(v,{class:"section-header"},{default:l((()=>[s(_,{class:"section-title"},{default:l((()=>[i("è¯¾ç¨‹")])),_:1}),s(_,{class:"section-count"},{default:l((()=>[i(c(O.value.courses.length),1)])),_:1})])),_:1}),(a(!0),k(p,null,m(O.value.courses,(e=>(a(),t(v,{key:e.id,class:"result-item",onClick:a=>K(e.id)},{default:l((()=>[s(F,{course:e},null,8,["course"])])),_:2},1032,["onClick"])))),128))])),_:1})):u("",!0),O.value.activities.length>0?(a(),t(v,{key:2,class:"result-section"},{default:l((()=>[s(v,{class:"section-header"},{default:l((()=>[s(_,{class:"section-title"},{default:l((()=>[i("æ´»åŠ¨")])),_:1}),s(_,{class:"section-count"},{default:l((()=>[i(c(O.value.activities.length),1)])),_:1})])),_:1}),(a(!0),k(p,null,m(O.value.activities,(e=>(a(),t(v,{key:e.id,class:"result-item",onClick:a=>P(e.id)},{default:l((()=>[s(D,{activity:e},null,8,["activity"])])),_:2},1032,["onClick"])))),128))])),_:1})):u("",!0),0===O.value.total?(a(),t($,{key:3,text:"æœªæ‰¾åˆ°ç›¸å…³å†…å®¹","show-btn":!1})):u("",!0)])),_:1})):"news"===H.value?(a(),t(v,{key:1},{default:l((()=>[(a(!0),k(p,null,m(O.value.news,(e=>(a(),t(v,{key:e.id,class:"result-item",onClick:a=>J(e.id)},{default:l((()=>[s(E,{news:e},null,8,["news"])])),_:2},1032,["onClick"])))),128)),0===O.value.news.length?(a(),t($,{key:0,text:"æœªæ‰¾åˆ°ç›¸å…³èµ„è®¯","show-btn":!1})):u("",!0)])),_:1})):"course"===H.value?(a(),t(v,{key:2},{default:l((()=>[(a(!0),k(p,null,m(O.value.courses,(e=>(a(),t(v,{key:e.id,class:"result-item",onClick:a=>K(e.id)},{default:l((()=>[s(F,{course:e},null,8,["course"])])),_:2},1032,["onClick"])))),128)),0===O.value.courses.length?(a(),t($,{key:0,text:"æœªæ‰¾åˆ°ç›¸å…³è¯¾ç¨‹","show-btn":!1})):u("",!0)])),_:1})):"activity"===H.value?(a(),t(v,{key:3},{default:l((()=>[(a(!0),k(p,null,m(O.value.activities,(e=>(a(),t(v,{key:e.id,class:"result-item",onClick:a=>P(e.id)},{default:l((()=>[s(D,{activity:e},null,8,["activity"])])),_:2},1032,["onClick"])))),128)),0===O.value.activities.length?(a(),t($,{key:0,text:"æœªæ‰¾åˆ°ç›¸å…³æ´»åŠ¨","show-btn":!1})):u("",!0)])),_:1})):u("",!0)])),_:1})):(a(),t(v,{key:2,class:"search-hints"},{default:l((()=>[s(v,{class:"hint-section"},{default:l((()=>[s(v,{class:"hint-title"},{default:l((()=>[i("ðŸ”¥ çƒ­é—¨æœç´¢")])),_:1}),s(v,{class:"hot-keywords"},{default:l((()=>[(a(!0),k(p,null,m(q.value,((e,s)=>(a(),t(v,{key:s,class:"keyword-tag",onClick:a=>M(e)},{default:l((()=>[i(c(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),s(v,{class:"hint-section"},{default:l((()=>[s(v,{class:"hint-title"},{default:l((()=>[i("ðŸ’¡ æœç´¢å»ºè®®")])),_:1}),s(v,{class:"suggestion-list"},{default:l((()=>[s(v,{class:"suggestion-item",onClick:n[1]||(n[1]=e=>M("ä¼ä¸šæˆ˜ç•¥ç®¡ç†"))},{default:l((()=>[s(I,{name:"search",size:32,color:"#999"}),s(_,{class:"suggestion-text"},{default:l((()=>[i("ä¼ä¸šæˆ˜ç•¥ç®¡ç†")])),_:1})])),_:1}),s(v,{class:"suggestion-item",onClick:n[2]||(n[2]=e=>M("æ•°å­—åŒ–è½¬åž‹"))},{default:l((()=>[s(I,{name:"search",size:32,color:"#999"}),s(_,{class:"suggestion-text"},{default:l((()=>[i("æ•°å­—åŒ–è½¬åž‹")])),_:1})])),_:1}),s(v,{class:"suggestion-item",onClick:n[3]||(n[3]=e=>M("é¢†å¯¼åŠ›åŸ¹è®­"))},{default:l((()=>[s(I,{name:"search",size:32,color:"#999"}),s(_,{class:"suggestion-text"},{default:l((()=>[i("é¢†å¯¼åŠ›åŸ¹è®­")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-e02c56f8"]]);export{H as default};
