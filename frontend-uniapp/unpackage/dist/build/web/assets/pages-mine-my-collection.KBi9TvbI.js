import{r as e,o as a,x as l,s,b as t,E as u,c as o,w as n,i,d as r,e as v,h as c,j as p,F as _,f as d,k as m,z as f,l as y}from"./index-Cljxm-NV.js";import{b as g}from"./news.DJfprz8c.js";import{N as w}from"./news-card.DZUxF8n8.js";import{E as j}from"./empty-view.C6sbClhI.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./util.DiFpgDCN.js";/* empty css                                                                   */const k=h({__name:"my-collection",setup(h){const k=e([]),x=e(!1),b=e(1),z=e(10),E=e(!0);a((()=>{F(!0)}));const F=async(e=!1)=>{if(!x.value){x.value=!0,e&&(b.value=1,E.value=!0);try{const a=await g({page:b.value,pageSize:z.value}),l=a.items||a.data||a.list||[];k.value=e?l:[...k.value,...l],l.length<z.value&&(E.value=!1),b.value++}catch(a){console.error("加载收藏列表失败：",a),l({title:"加载失败",icon:"none"})}finally{x.value=!1,e&&s()}}},C=e=>{y({url:`/pages/news/detail?id=${e.id}`})};return t((()=>{F(!0)})),u((()=>{E.value&&!x.value&&F(!1)})),(e,a)=>{const l=f,s=i;return r(),o(s,{class:"page"},{default:n((()=>[v(s,{class:"collection-list"},{default:n((()=>[(r(!0),c(_,null,p(k.value,(e=>(r(),o(w,{key:e.id,news:e,onClick:C},null,8,["news"])))),128)),x.value||0!==k.value.length?d("",!0):(r(),o(j,{key:0,text:"暂无收藏"})),x.value?(r(),o(s,{key:1,class:"loading-more"},{default:n((()=>[v(l,null,{default:n((()=>[m("加载中...")])),_:1})])),_:1})):d("",!0),!E.value&&k.value.length>0?(r(),o(s,{key:2,class:"no-more"},{default:n((()=>[v(l,null,{default:n((()=>[m("没有更多了")])),_:1})])),_:1})):d("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-ef638be2"]]);export{k as default};
