# æœåŠ¡å™¨å¿«é€Ÿä¿®å¤æ­¥éª¤

## é—®é¢˜åŸå› 
åç«¯å¥åº·æ£€æŸ¥è®¿é—®çš„æ˜¯ `/health`ï¼Œä½†å®é™…ç«¯ç‚¹æ˜¯ `/api/health`ï¼ˆå› ä¸ºæœ‰å…¨å±€å‰ç¼€ï¼‰ã€‚

## ä¿®å¤æ­¥éª¤

### 1ï¸âƒ£ æ‹‰å–æœ€æ–°ä»£ç 
```bash
cd ~/edp-project
git pull origin main
```

### 2ï¸âƒ£ åœæ­¢å¹¶åˆ é™¤åç«¯å®¹å™¨
```bash
cd ~/edp-project/docker-stack
docker-compose stop backend
docker-compose rm -sf backend
```

### 3ï¸âƒ£ é‡æ–°å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
docker-compose up -d
```

### 4ï¸âƒ£ ç­‰å¾…å¹¶æŸ¥çœ‹æ—¥å¿—
```bash
# ç­‰å¾… 60 ç§’è®©æœåŠ¡å¯åŠ¨
sleep 60

# æŸ¥çœ‹åç«¯æ—¥å¿—
docker logs edp-backend --tail 50

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps
```

### 5ï¸âƒ£ éªŒè¯å¥åº·æ£€æŸ¥
```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥ç«¯ç‚¹
curl http://localhost:3000/api/health

# åº”è¯¥è¿”å›ï¼š{"status":"ok","timestamp":"..."}
```

### 6ï¸âƒ£ å¦‚æœå®¹å™¨æ­£å¸¸ï¼Œè¿è¡Œåˆå§‹åŒ–è„šæœ¬
```bash
cd ~/edp-project/docker-stack
chmod +x init-system.sh
./init-system.sh
```

---

## ä¸€é”®æ‰§è¡Œè„šæœ¬

ä½ ä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶è¿™ä¸ªå‘½ä»¤åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd ~/edp-project && \
git pull origin main && \
cd docker-stack && \
docker-compose stop backend && \
docker-compose rm -sf backend && \
docker-compose up -d && \
echo "â³ ç­‰å¾… 60 ç§’è®©æœåŠ¡å¯åŠ¨..." && \
sleep 60 && \
echo "ğŸ“‹ æŸ¥çœ‹å®¹å™¨çŠ¶æ€ï¼š" && \
docker ps && \
echo "" && \
echo "ğŸ” æµ‹è¯•å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼š" && \
curl http://localhost:3000/api/health
```

---

## é¢„æœŸç»“æœ

æ‰€æœ‰å®¹å™¨çŠ¶æ€åº”è¯¥æ˜¾ç¤ºä¸º `healthy` æˆ– `Up`ï¼š
```
CONTAINER ID   IMAGE                    STATUS
abc123...      docker-stack-frontend    Up (healthy)
def456...      docker-stack-backend     Up (healthy)
ghi789...      mysql:8.0                Up (healthy)
jkl012...      redis:7-alpine           Up (healthy)
```

