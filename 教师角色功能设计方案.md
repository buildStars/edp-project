# æ•™å¸ˆè§’è‰²åŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ éœ€æ±‚åˆ†æ

### æ ¸å¿ƒç—›ç‚¹
1. æ•™å¸ˆéœ€è¦ç®¡ç†è‡ªå·±çš„å­¦å‘˜
2. æ•™å¸ˆéœ€è¦æŸ¥çœ‹è¯¾ç¨‹ç›¸å…³æ•°æ®
3. æ•™å¸ˆéœ€è¦ç®¡ç†è¯¾ç¨‹ç­¾åˆ°å’Œè¯„ä»·
4. æ•™å¸ˆéœ€è¦ä¸Šä¼ å’Œç®¡ç†è¯¾ä»¶

### è®¾è®¡ç›®æ ‡
- æ•°æ®éš”ç¦»ï¼šæ•™å¸ˆåªèƒ½çœ‹åˆ°è‡ªå·±çš„æ•°æ®
- åŠŸèƒ½å®Œæ•´ï¼šæä¾›è¯¾ç¨‹ç®¡ç†çš„å…¨æµç¨‹åŠŸèƒ½
- ç•Œé¢å‹å¥½ï¼šä¸“é—¨ä¸ºæ•™å¸ˆè®¾è®¡çš„å·¥ä½œå°

## ğŸ¯ åŠŸèƒ½æ¨¡å—è®¾è®¡

### 1. æˆ‘çš„è¯¾ç¨‹ï¼ˆæ•™å¸ˆå·¥ä½œå°ï¼‰

#### 1.1 è¯¾ç¨‹æ¦‚è§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆ‘çš„è¯¾ç¨‹ (å…± 5 é—¨)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»Ÿè®¡å¡ç‰‡ï¼š                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ è¿›è¡Œä¸­ â”‚ å·²å®Œæˆ â”‚ æ€»å­¦å‘˜ â”‚ å¾…ç­¾åˆ° â”‚          â”‚
â”‚  â”‚   3   â”‚   2   â”‚  156  â”‚   45  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2 è¯¾ç¨‹åˆ—è¡¨ï¼ˆå¸¦å¿«æ·æ“ä½œï¼‰
- è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯
- æŠ¥åäººæ•°/ç­¾åˆ°äººæ•°
- å¿«æ·æ“ä½œï¼š
  - å¼€å§‹ç­¾åˆ°
  - æŸ¥çœ‹å­¦å‘˜
  - è¯¾ç¨‹è¯„ä»·
  - ä¸Šä¼ è¯¾ä»¶
  - ç¼–è¾‘è¯¾ç¨‹

### 2. æˆ‘çš„å­¦å‘˜

#### 2.1 å­¦å‘˜åˆ—è¡¨ï¼ˆåªæ˜¾ç¤ºæŠ¥åäº†è‡ªå·±è¯¾ç¨‹çš„å­¦å‘˜ï¼‰
- å­¦å‘˜åŸºæœ¬ä¿¡æ¯
- æŠ¥åè¯¾ç¨‹åˆ—è¡¨
- ç­¾åˆ°è®°å½•
- å­¦ä¹ è¿›åº¦
- è¯„ä»·åé¦ˆ

#### 2.2 å­¦å‘˜è¯¦æƒ…
- ä¸ªäººä¿¡æ¯
- æŠ¥åè¯¾ç¨‹
- ç­¾åˆ°ç»Ÿè®¡
- è¯„ä»·å†å²
- å­¦åˆ†è·å¾—æƒ…å†µ

### 3. ç­¾åˆ°ç®¡ç†

#### 3.1 ç­¾åˆ°ç»Ÿè®¡
- å®æ—¶ç­¾åˆ°ç‡
- ç­¾åˆ°è¶‹åŠ¿å›¾
- ç¼ºå‹¤å­¦å‘˜åˆ—è¡¨

#### 3.2 ç­¾åˆ°æ“ä½œ
- å¼€å¯ç­¾åˆ°ï¼ˆè®¾ç½®æœ‰æ•ˆæ—¶é—´ï¼‰
- æŸ¥çœ‹ç­¾åˆ°äºŒç»´ç 
- æ‰‹åŠ¨ç­¾åˆ°
- å¯¼å‡ºç­¾åˆ°è¡¨

### 4. è¯¾ç¨‹è¯„ä»·

#### 4.1 è¯„ä»·ç»Ÿè®¡
- è¯„ä»·ç‡
- å¹³å‡è¯„åˆ†
- è¯„ä»·è¶‹åŠ¿
- è¯äº‘åˆ†æ

#### 4.2 è¯„ä»·è¯¦æƒ…
- å­¦å‘˜è¯„ä»·åˆ—è¡¨
- è¯„ä»·å†…å®¹
- è¯„åˆ†åˆ†å¸ƒ
- é—®é¢˜åé¦ˆ

### 5. è¯¾ä»¶ç®¡ç†

#### 5.1 è¯¾ä»¶åº“
- æŒ‰è¯¾ç¨‹åˆ†ç±»
- æ–‡ä»¶åˆ—è¡¨
- ä¸Šä¼ /åˆ é™¤
- é¢„è§ˆ/ä¸‹è½½

### 6. æ•™å­¦æ•°æ®

#### 6.1 æ•°æ®çœ‹æ¿
- å­¦å‘˜å‡ºå‹¤ç‡
- è¯¾ç¨‹å®Œæˆç‡
- è¯„ä»·æ»¡æ„åº¦
- å­¦å‘˜å¢é•¿è¶‹åŠ¿

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ–°å¢è¡¨ï¼šæ•™å¸ˆ-å­¦å‘˜å…³ç³»è¡¨

```prisma
// æ•™å¸ˆ-å­¦å‘˜å…³ç³»è¡¨ï¼ˆå·²å­˜åœ¨ TeacherStudentï¼‰
model TeacherStudent {
  id         String   @id @default(uuid())
  teacherId  String   // æ•™å¸ˆID
  studentId  String   // å­¦å‘˜ID
  assignedBy String?  // åˆ†é…äººID
  assignedAt DateTime @default(now())
  notes      String?  // å¤‡æ³¨
  
  teacher    User     @relation("TeacherRelations", fields: [teacherId], references: [id])
  student    User     @relation("StudentRelations", fields: [studentId], references: [id])
  
  @@unique([teacherId, studentId])
  @@index([teacherId])
  @@index([studentId])
  @@map("teacher_students")
}
```

### æ–°å¢ï¼šè¯¾ç¨‹-æ•™å¸ˆå…³è”

```prisma
// Course è¡¨æ·»åŠ å­—æ®µ
model Course {
  // ... ç°æœ‰å­—æ®µ
  teacherId     String?  // ä¸»è®²æ•™å¸ˆID
  teacherName   String?  // æ•™å¸ˆå§“åï¼ˆå†—ä½™å­—æ®µï¼Œä¾¿äºæ˜¾ç¤ºï¼‰
  // ... å…¶ä»–å­—æ®µ
}
```

## ğŸ” æƒé™è®¾è®¡

### æ•°æ®æƒé™è§„åˆ™

| æ•°æ®ç±»å‹ | æ•™å¸ˆæƒé™ | å®ç°æ–¹å¼ |
|---------|---------|---------|
| è¯¾ç¨‹åˆ—è¡¨ | åªèƒ½çœ‹åˆ° teacherId = è‡ªå·±çš„è¯¾ç¨‹ | SQL WHERE è¿‡æ»¤ |
| å­¦å‘˜åˆ—è¡¨ | åªèƒ½çœ‹åˆ°æŠ¥åäº†è‡ªå·±è¯¾ç¨‹çš„å­¦å‘˜ | å…³è”æŸ¥è¯¢ Enrollment |
| ç­¾åˆ°è®°å½• | åªèƒ½çœ‹åˆ°è‡ªå·±è¯¾ç¨‹çš„ç­¾åˆ° | å…³è”æŸ¥è¯¢ Course |
| è¯„ä»·è®°å½• | åªèƒ½çœ‹åˆ°è‡ªå·±è¯¾ç¨‹çš„è¯„ä»· | å…³è”æŸ¥è¯¢ Course |
| è¯¾ä»¶ç®¡ç† | åªèƒ½ç®¡ç†è‡ªå·±è¯¾ç¨‹çš„è¯¾ä»¶ | å…³è”æŸ¥è¯¢ Course |

### åŠŸèƒ½æƒé™

```typescript
// æ•™å¸ˆè§’è‰²æ–°å¢æƒé™
TEACHER: [
  'dashboard:view',           // æŸ¥çœ‹é¦–é¡µ
  'my-courses:view',          // æŸ¥çœ‹æˆ‘çš„è¯¾ç¨‹ï¼ˆæ–°å¢ï¼‰
  'my-courses:manage',        // ç®¡ç†æˆ‘çš„è¯¾ç¨‹ï¼ˆæ–°å¢ï¼‰
  'my-students:view',         // æŸ¥çœ‹æˆ‘çš„å­¦å‘˜ï¼ˆæ–°å¢ï¼‰
  'courses:view',             // æŸ¥çœ‹è¯¾ç¨‹åˆ—è¡¨
  'courses:create',           // åˆ›å»ºè¯¾ç¨‹
  'courses:edit',             // ç¼–è¾‘è¯¾ç¨‹
  'chapters:view',            // æŸ¥çœ‹ç« èŠ‚
  'chapters:manage',          // ç®¡ç†ç« èŠ‚
  'enrollments:view',         // æŸ¥çœ‹æŠ¥å
  'enrollments:checkin',      // ç­¾åˆ°ç®¡ç†
  'enrollments:evaluation',   // è¯„ä»·ç®¡ç†
  'courseware:view',          // æŸ¥çœ‹è¯¾ä»¶
  'courseware:upload',        // ä¸Šä¼ è¯¾ä»¶
  'statistics:view',          // æŸ¥çœ‹ç»Ÿè®¡
]
```

## ğŸ’» å‰ç«¯å®ç°

### è·¯ç”±é…ç½®

```typescript
// admin-frontend/src/router/index.ts
{
  path: '/teacher',
  name: 'Teacher',
  meta: {
    title: 'æ•™å­¦ç®¡ç†',
    icon: 'UserFilled',
  },
  children: [
    {
      path: '/teacher/courses',
      name: 'TeacherCourses',
      component: () => import('@/views/Teacher/MyCourses.vue'),
      meta: {
        title: 'æˆ‘çš„è¯¾ç¨‹',
        permission: 'my-courses:view',
      },
    },
    {
      path: '/teacher/students',
      name: 'TeacherStudents',
      component: () => import('@/views/Teacher/MyStudents.vue'),
      meta: {
        title: 'æˆ‘çš„å­¦å‘˜',
        permission: 'my-students:view',
      },
    },
    {
      path: '/teacher/checkin/:courseId',
      name: 'TeacherCheckin',
      component: () => import('@/views/Teacher/CourseCheckin.vue'),
      meta: {
        title: 'è¯¾ç¨‹ç­¾åˆ°',
        hidden: true,
        activeMenu: '/teacher/courses',
      },
    },
    {
      path: '/teacher/evaluation/:courseId',
      name: 'TeacherEvaluation',
      component: () => import('@/views/Teacher/CourseEvaluation.vue'),
      meta: {
        title: 'è¯¾ç¨‹è¯„ä»·',
        hidden: true,
        activeMenu: '/teacher/courses',
      },
    },
  ],
}
```

### é¡µé¢ç»“æ„

```
admin-frontend/src/views/Teacher/
â”œâ”€â”€ MyCourses.vue          # æˆ‘çš„è¯¾ç¨‹åˆ—è¡¨ï¼ˆå·¥ä½œå°ï¼‰
â”œâ”€â”€ MyStudents.vue         # æˆ‘çš„å­¦å‘˜åˆ—è¡¨
â”œâ”€â”€ CourseCheckin.vue      # è¯¾ç¨‹ç­¾åˆ°ç®¡ç†
â”œâ”€â”€ CourseEvaluation.vue   # è¯¾ç¨‹è¯„ä»·æŸ¥çœ‹
â””â”€â”€ components/
    â”œâ”€â”€ CourseCard.vue     # è¯¾ç¨‹å¡ç‰‡
    â”œâ”€â”€ StudentCard.vue    # å­¦å‘˜å¡ç‰‡
    â””â”€â”€ CheckinStats.vue   # ç­¾åˆ°ç»Ÿè®¡
```

## ğŸ”§ åç«¯å®ç°

### API è®¾è®¡

#### 1. æ•™å¸ˆè¯¾ç¨‹ç›¸å…³

```typescript
// GET /api/teachers/my-courses
// è·å–æ•™å¸ˆçš„è¯¾ç¨‹åˆ—è¡¨
{
  courses: Course[],
  statistics: {
    totalCourses: number,
    activeCourses: number,
    totalStudents: number,
    pendingCheckins: number
  }
}

// GET /api/teachers/courses/:id/students
// è·å–æŸè¯¾ç¨‹çš„å­¦å‘˜åˆ—è¡¨
{
  students: User[],
  statistics: {
    total: number,
    checkedIn: number,
    evaluated: number
  }
}
```

#### 2. æ•™å¸ˆå­¦å‘˜ç›¸å…³

```typescript
// GET /api/teachers/my-students
// è·å–æ•™å¸ˆçš„æ‰€æœ‰å­¦å‘˜ï¼ˆå»é‡ï¼‰
{
  students: User[],
  pagination: {
    total: number,
    page: number,
    pageSize: number
  }
}

// GET /api/teachers/students/:id
// è·å–å­¦å‘˜è¯¦æƒ…
{
  student: User,
  enrolledCourses: Course[],
  checkinRecords: Checkin[],
  evaluations: Evaluation[]
}

// POST /api/teachers/assign-students
// ç®¡ç†å‘˜/æ•™åŠ¡ç»™æ•™å¸ˆåˆ†é…å­¦å‘˜
{
  teacherId: string,
  studentIds: string[]
}
```

#### 3. ç­¾åˆ°ç®¡ç†

```typescript
// GET /api/teachers/courses/:id/checkins
// è·å–è¯¾ç¨‹ç­¾åˆ°ç»Ÿè®¡
{
  sessions: CheckinSession[],
  statistics: {
    totalSessions: number,
    averageAttendance: number,
    totalCheckins: number
  }
}

// POST /api/teachers/courses/:id/checkin/start
// å¼€å§‹ç­¾åˆ°
{
  duration: number  // ç­¾åˆ°æœ‰æ•ˆæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
}
```

#### 4. è¯„ä»·ç®¡ç†

```typescript
// GET /api/teachers/courses/:id/evaluations
// è·å–è¯¾ç¨‹è¯„ä»·
{
  evaluations: Evaluation[],
  statistics: {
    totalCount: number,
    averageScore: number,
    scoreDistribution: {
      5: number,
      4: number,
      3: number,
      2: number,
      1: number
    }
  }
}
```

### åç«¯æœåŠ¡å®ç°

```typescript
// backend/src/modules/teachers/teachers.service.ts

@Injectable()
export class TeachersService {
  constructor(private prisma: PrismaService) {}

  // è·å–æ•™å¸ˆçš„è¯¾ç¨‹åˆ—è¡¨ï¼ˆåªè¿”å›è‡ªå·±çš„è¯¾ç¨‹ï¼‰
  async getMyCourses(teacherId: string) {
    const courses = await this.prisma.course.findMany({
      where: {
        teacherId,
        status: { not: 'DELETED' }
      },
      include: {
        _count: {
          select: {
            enrollments: {
              where: { status: 'ENROLLED' }
            }
          }
        }
      },
      orderBy: { startTime: 'desc' }
    });

    // ç»Ÿè®¡æ•°æ®
    const statistics = {
      totalCourses: courses.length,
      activeCourses: courses.filter(c => c.status === 'PUBLISHED').length,
      totalStudents: courses.reduce((sum, c) => sum + c._count.enrollments, 0),
      pendingCheckins: 0 // éœ€è¦å•ç‹¬æŸ¥è¯¢
    };

    return { courses, statistics };
  }

  // è·å–æ•™å¸ˆçš„å­¦å‘˜åˆ—è¡¨ï¼ˆåªè¿”å›æŠ¥åäº†è‡ªå·±è¯¾ç¨‹çš„å­¦å‘˜ï¼‰
  async getMyStudents(teacherId: string, query: any) {
    // å…ˆè·å–æ•™å¸ˆçš„æ‰€æœ‰è¯¾ç¨‹
    const teacherCourses = await this.prisma.course.findMany({
      where: { teacherId },
      select: { id: true }
    });

    const courseIds = teacherCourses.map(c => c.id);

    // æŸ¥è¯¢æŠ¥åäº†è¿™äº›è¯¾ç¨‹çš„å­¦å‘˜ï¼ˆå»é‡ï¼‰
    const enrollments = await this.prisma.enrollment.findMany({
      where: {
        courseId: { in: courseIds },
        status: 'ENROLLED'
      },
      include: {
        user: true,
        course: {
          select: {
            id: true,
            title: true
          }
        }
      },
      distinct: ['userId']
    });

    return enrollments.map(e => ({
      ...e.user,
      enrolledCourse: e.course
    }));
  }

  // è·å–è¯¾ç¨‹çš„å­¦å‘˜åˆ—è¡¨
  async getCourseStudents(teacherId: string, courseId: string) {
    // éªŒè¯è¯¾ç¨‹æ˜¯å¦å±äºè¯¥æ•™å¸ˆ
    const course = await this.prisma.course.findFirst({
      where: {
        id: courseId,
        teacherId
      }
    });

    if (!course) {
      throw new ForbiddenException('æ— æƒè®¿é—®è¯¥è¯¾ç¨‹');
    }

    const enrollments = await this.prisma.enrollment.findMany({
      where: {
        courseId,
        status: 'ENROLLED'
      },
      include: {
        user: true,
        checkins: true,
        evaluations: true
      }
    });

    return enrollments.map(e => ({
      ...e.user,
      checkinCount: e.checkins.length,
      hasEvaluated: e.evaluations.length > 0
    }));
  }
}
```

## ğŸ“± é¡µé¢è®¾è®¡

### 1. æˆ‘çš„è¯¾ç¨‹ï¼ˆå·¥ä½œå°ï¼‰

```vue
<template>
  <div class="teacher-courses">
    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <el-row :gutter="20" class="stats-row">
      <el-col :span="6">
        <el-card class="stat-card">
          <div class="stat-icon courses">ğŸ“š</div>
          <div class="stat-info">
            <div class="stat-value">{{ statistics.totalCourses }}</div>
            <div class="stat-label">æ€»è¯¾ç¨‹æ•°</div>
          </div>
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card class="stat-card">
          <div class="stat-icon active">ğŸ“</div>
          <div class="stat-info">
            <div class="stat-value">{{ statistics.activeCourses }}</div>
            <div class="stat-label">è¿›è¡Œä¸­</div>
          </div>
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card class="stat-card">
          <div class="stat-icon students">ğŸ‘¥</div>
          <div class="stat-info">
            <div class="stat-value">{{ statistics.totalStudents }}</div>
            <div class="stat-label">æ€»å­¦å‘˜æ•°</div>
          </div>
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card class="stat-card">
          <div class="stat-icon pending">â°</div>
          <div class="stat-info">
            <div class="stat-value">{{ statistics.pendingCheckins }}</div>
            <div class="stat-label">å¾…ç­¾åˆ°</div>
          </div>
        </el-card>
      </el-col>
    </el-row>

    <!-- è¯¾ç¨‹åˆ—è¡¨ -->
    <el-card class="courses-list">
      <template #header>
        <div class="card-header">
          <span>æˆ‘çš„è¯¾ç¨‹</span>
          <el-button v-permission="'courses:create'" type="primary" @click="handleCreate">
            åˆ›å»ºè¯¾ç¨‹
          </el-button>
        </div>
      </template>

      <el-table :data="courses" v-loading="loading">
        <el-table-column prop="title" label="è¯¾ç¨‹åç§°" min-width="200" />
        <el-table-column label="æŠ¥åäººæ•°" width="100" align="center">
          <template #default="{ row }">
            {{ row._count.enrollments }}
          </template>
        </el-table-column>
        <el-table-column label="çŠ¶æ€" width="100">
          <template #default="{ row }">
            <el-tag :type="getStatusType(row.status)">
              {{ getStatusLabel(row.status) }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column label="å¼€è¯¾æ—¶é—´" width="180">
          <template #default="{ row }">
            {{ formatDate(row.startTime) }}
          </template>
        </el-table-column>
        <el-table-column label="æ“ä½œ" width="400" fixed="right">
          <template #default="{ row }">
            <el-button link @click="handleViewStudents(row)">
              å­¦å‘˜({{ row._count.enrollments }})
            </el-button>
            <el-button link type="primary" @click="handleStartCheckin(row)">
              å¼€å§‹ç­¾åˆ°
            </el-button>
            <el-button link @click="handleViewCheckins(row)">
              ç­¾åˆ°è®°å½•
            </el-button>
            <el-button link @click="handleViewEvaluations(row)">
              è¯¾ç¨‹è¯„ä»·
            </el-button>
            <el-button link @click="handleManageMaterials(row)">
              è¯¾ä»¶ç®¡ç†
            </el-button>
            <el-button link type="primary" @click="handleEdit(row)">
              ç¼–è¾‘
            </el-button>
          </template>
        </el-table-column>
      </el-table>
    </el-card>
  </div>
</template>
```

### 2. æˆ‘çš„å­¦å‘˜

```vue
<template>
  <div class="teacher-students">
    <el-card>
      <template #header>
        <div class="card-header">
          <span>æˆ‘çš„å­¦å‘˜ (å…± {{ total }} äºº)</span>
        </div>
      </template>

      <el-table :data="students" v-loading="loading">
        <el-table-column prop="realName" label="å§“å" width="120" />
        <el-table-column prop="phone" label="æ‰‹æœºå·" width="130" />
        <el-table-column label="æŠ¥åè¯¾ç¨‹" min-width="200">
          <template #default="{ row }">
            <el-tag v-for="course in row.courses" :key="course.id" class="mr-5">
              {{ course.title }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column label="ç­¾åˆ°æ¬¡æ•°" width="100" align="center">
          <template #default="{ row }">
            {{ row.checkinCount }}
          </template>
        </el-table-column>
        <el-table-column label="è¯„ä»·æ¬¡æ•°" width="100" align="center">
          <template #default="{ row }">
            {{ row.evaluationCount }}
          </template>
        </el-table-column>
        <el-table-column label="æ“ä½œ" width="150">
          <template #default="{ row }">
            <el-button link type="primary" @click="handleViewDetail(row)">
              æŸ¥çœ‹è¯¦æƒ…
            </el-button>
          </template>
        </el-table-column>
      </el-table>
    </el-card>
  </div>
</template>
```

## ğŸ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. å¿«æ·æ“ä½œ
- ä¸€é”®å¼€å¯ç­¾åˆ°
- å¿«é€ŸæŸ¥çœ‹å­¦å‘˜
- å®æ—¶ç­¾åˆ°æé†’

### 2. æ•°æ®å¯è§†åŒ–
- ç­¾åˆ°ç‡è¶‹åŠ¿å›¾
- è¯„ä»·åˆ†æ•°åˆ†å¸ƒ
- å­¦å‘˜å¢é•¿æ›²çº¿

### 3. ç§»åŠ¨ç«¯é€‚é…
- æ‰‹æœºæ‰«ç ç­¾åˆ°
- ç§»åŠ¨ç«¯æŸ¥çœ‹æ•°æ®
- æ¨é€ç­¾åˆ°æé†’

## ğŸ“Š å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
- âœ… æ•°æ®æƒé™æ§åˆ¶
- âœ… æˆ‘çš„è¯¾ç¨‹é¡µé¢
- âœ… æˆ‘çš„å­¦å‘˜é¡µé¢
- âœ… åŸºç¡€ç­¾åˆ°åŠŸèƒ½

### ç¬¬äºŒé˜¶æ®µï¼šå¢å¼ºåŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
- â–¡ ç­¾åˆ°ç»Ÿè®¡å’Œå›¾è¡¨
- â–¡ è¯„ä»·ç»Ÿè®¡å’Œåˆ†æ
- â–¡ è¯¾ä»¶ç®¡ç†ä¼˜åŒ–
- â–¡ æ•°æ®å¯¼å‡ºåŠŸèƒ½

### ç¬¬ä¸‰é˜¶æ®µï¼šä½“éªŒä¼˜åŒ–ï¼ˆ3å¤©ï¼‰
- â–¡ ç§»åŠ¨ç«¯é€‚é…
- â–¡ å®æ—¶é€šçŸ¥
- â–¡ æ€§èƒ½ä¼˜åŒ–
- â–¡ ç”¨æˆ·åé¦ˆæ”¶é›†

## ğŸ’¡ æŠ€æœ¯è¦ç‚¹

### 1. æ•°æ®æƒé™è¿‡æ»¤

```typescript
// åœ¨ Service å±‚ç»Ÿä¸€å¤„ç†
async findCourses(userId: string, userRole: string, query: any) {
  const where: any = { ...query };
  
  // æ•™å¸ˆåªèƒ½çœ‹åˆ°è‡ªå·±çš„è¯¾ç¨‹
  if (userRole === 'TEACHER') {
    where.teacherId = userId;
  }
  
  return this.prisma.course.findMany({ where });
}
```

### 2. æ€§èƒ½ä¼˜åŒ–

```typescript
// ä½¿ç”¨ include ä¼˜åŒ–æŸ¥è¯¢
const courses = await this.prisma.course.findMany({
  include: {
    _count: {
      select: {
        enrollments: true,
        checkins: true
      }
    }
  }
});

// æ‰¹é‡æŸ¥è¯¢å‡å°‘æ•°æ®åº“è®¿é—®
const courseIds = courses.map(c => c.id);
const stats = await this.prisma.enrollment.groupBy({
  by: ['courseId'],
  where: { courseId: { in: courseIds } },
  _count: true
});
```

### 3. ç¼“å­˜ç­–ç•¥

```typescript
// ä½¿ç”¨ Redis ç¼“å­˜è¯¾ç¨‹ç»Ÿè®¡æ•°æ®
const cacheKey = `teacher:${teacherId}:stats`;
let stats = await this.redis.get(cacheKey);

if (!stats) {
  stats = await this.calculateStats(teacherId);
  await this.redis.set(cacheKey, stats, 300); // 5åˆ†é’Ÿè¿‡æœŸ
}
```

## âœ… éªŒè¯æ¸…å•

- [ ] æ•™å¸ˆåªèƒ½çœ‹åˆ°è‡ªå·±çš„è¯¾ç¨‹
- [ ] æ•™å¸ˆåªèƒ½çœ‹åˆ°è‡ªå·±è¯¾ç¨‹çš„å­¦å‘˜
- [ ] ç­¾åˆ°åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] è¯„ä»·æ•°æ®æ­£ç¡®æ˜¾ç¤º
- [ ] è¯¾ä»¶ä¸Šä¼ ä¸‹è½½æ­£å¸¸
- [ ] æ•°æ®ç»Ÿè®¡å‡†ç¡®
- [ ] æƒé™æ§åˆ¶æœ‰æ•ˆ
- [ ] é¡µé¢å“åº”æµç•…

è¿™ä¸ªæ–¹æ¡ˆæ˜¯å¦ç¬¦åˆæ‚¨çš„æœŸæœ›ï¼Ÿéœ€è¦æˆ‘å¼€å§‹å®ç°å“ªä¸ªéƒ¨åˆ†å—ï¼Ÿ













